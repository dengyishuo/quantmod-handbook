<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>第 1 章 数据获取指南 | quantmod：从数据获取到策略实战全景指南</title>
  <meta name="description" content="本书全面解析 R 语言 quantmod 包在金融数据分析与交易策略开发中的核心应用。本书从基础数据获取到高级策略回测，通过 200 + 实例代码详解量化全流程，涵盖指标定制、图表可视化、模型构建与绩效评估。附赠策略模板库，助读者快速搭建个性化量化系统，是金融分析师、量化交易者及相关专业学生的必备工具书。" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="第 1 章 数据获取指南 | quantmod：从数据获取到策略实战全景指南" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/cover.jpg" />
  <meta property="og:description" content="本书全面解析 R 语言 quantmod 包在金融数据分析与交易策略开发中的核心应用。本书从基础数据获取到高级策略回测，通过 200 + 实例代码详解量化全流程，涵盖指标定制、图表可视化、模型构建与绩效评估。附赠策略模板库，助读者快速搭建个性化量化系统，是金融分析师、量化交易者及相关专业学生的必备工具书。" />
  <meta name="github-repo" content="dengyihsuo/quantmod-handbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="第 1 章 数据获取指南 | quantmod：从数据获取到策略实战全景指南" />
  
  <meta name="twitter:description" content="本书全面解析 R 语言 quantmod 包在金融数据分析与交易策略开发中的核心应用。本书从基础数据获取到高级策略回测，通过 200 + 实例代码详解量化全流程，涵盖指标定制、图表可视化、模型构建与绩效评估。附赠策略模板库，助读者快速搭建个性化量化系统，是金融分析师、量化交易者及相关专业学生的必备工具书。" />
  <meta name="twitter:image" content="/images/cover.jpg" />

<meta name="author" content="邓一硕" />


<meta name="date" content="2025-07-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="author.html"/>
<link rel="next" href="manipulation.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">quantmod：从数据获取到策略实战全景指南</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path=""><a href="#%E5%89%8D%E8%A8%80"><i class="fa fa-check"></i>前言</a></li>
<li class="chapter" data-level="" data-path="author.html"><a href="author.html"><i class="fa fa-check"></i>作者简介</a></li>
<li class="chapter" data-level="1" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>1</b> 数据获取指南</a>
<ul>
<li class="chapter" data-level="1.1" data-path="01-data.html"><a href="#%E8%82%A1%E7%A5%A8%E6%97%A5%E4%BA%A4%E6%98%93%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97"><i class="fa fa-check"></i><b>1.1</b> 股票日交易数据获取指南</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="01-data.html"><a href="#%E4%B8%AD%E5%9B%BD%E5%B8%82%E5%9C%BA%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96"><i class="fa fa-check"></i><b>1.1.1</b> 中国市场数据获取</a></li>
<li class="chapter" data-level="1.1.2" data-path="01-data.html"><a href="#%E8%8E%B7%E5%8F%96%E7%BE%8E%E5%9B%BD%E5%B8%82%E5%9C%BA%E6%95%B0%E6%8D%AE"><i class="fa fa-check"></i><b>1.1.2</b> 获取美国市场数据</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="01-data.html"><a href="#%E4%BA%A4%E6%98%93%E6%95%B0%E6%8D%AE%E7%9A%84%E7%AE%A1%E7%90%86%E4%B8%8E%E9%87%8D%E5%91%BD%E5%90%8D"><i class="fa fa-check"></i><b>1.2</b> 交易数据的管理与重命名</a></li>
<li class="chapter" data-level="1.3" data-path="01-data.html"><a href="#%E8%82%A1%E6%81%AF%E4%B8%8E%E6%8B%86%E8%82%A1%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97"><i class="fa fa-check"></i><b>1.3</b> 股息与拆股数据获取指南</a></li>
<li class="chapter" data-level="1.4" data-path="01-data.html"><a href="#%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E5%8F%96%E6%8C%87%E5%8D%97"><i class="fa fa-check"></i><b>1.4</b> 期权交易数据获取取指南</a></li>
<li class="chapter" data-level="1.5" data-path="01-data.html"><a href="#%E6%B1%87%E5%B8%82%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97"><i class="fa fa-check"></i><b>1.5</b> 汇市数据获取指南</a></li>
<li class="chapter" data-level="1.6" data-path="01-data.html"><a href="#%E8%B4%B5%E9%87%8D%E9%87%91%E5%B1%9E%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97"><i class="fa fa-check"></i><b>1.6</b> 贵重金属数据获取指南</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="01-data.html"><a href="#%E9%BB%84%E9%87%91%E4%BB%B7%E6%A0%BC%E8%8E%B7%E5%8F%96"><i class="fa fa-check"></i><b>1.6.1</b> 黄金价格获取</a></li>
<li class="chapter" data-level="1.6.2" data-path="01-data.html"><a href="#%E9%92%AF%E9%87%91%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96"><i class="fa fa-check"></i><b>1.6.2</b> 钯金数据获取</a></li>
<li class="chapter" data-level="1.6.3" data-path="01-data.html"><a href="#%E9%93%82%E9%87%91%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96"><i class="fa fa-check"></i><b>1.6.3</b> 铂金数据获取</a></li>
<li class="chapter" data-level="1.6.4" data-path="01-data.html"><a href="#%E6%89%B9%E9%87%8F%E8%8E%B7%E5%8F%96%E5%A4%9A%E7%A7%8D%E8%B4%B5%E9%87%91%E5%B1%9E%E6%95%B0%E6%8D%AE"><i class="fa fa-check"></i><b>1.6.4</b> 批量获取多种贵金属数据</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="01-data.html"><a href="#%E7%BE%8E%E8%81%94%E5%82%A8%E7%BB%8F%E6%B5%8E%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97"><i class="fa fa-check"></i><b>1.7</b> 美联储经济数据获取指南</a></li>
<li class="chapter" data-level="1.8" data-path="01-data.html"><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97"><i class="fa fa-check"></i><b>1.8</b> 数据库数据获取指南</a></li>
<li class="chapter" data-level="1.9" data-path="01-data.html"><a href="#%E6%9F%A5%E7%9C%8B%E5%92%8C%E7%A7%BB%E9%99%A4%E6%95%B0%E6%8D%AE"><i class="fa fa-check"></i><b>1.9</b> 查看和移除数据</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="01-data.html"><a href="#%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE"><i class="fa fa-check"></i><b>1.9.1</b> 查看数据</a></li>
<li class="chapter" data-level="1.9.2" data-path="01-data.html"><a href="#%E7%A7%BB%E9%99%A4%E6%95%B0%E6%8D%AE"><i class="fa fa-check"></i><b>1.9.2</b> 移除数据</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="manipulation.html"><a href="manipulation.html"><i class="fa fa-check"></i><b>2</b> 基本数据操作</a>
<ul>
<li class="chapter" data-level="2.1" data-path="01-data.html"><a href="#%E9%AA%8C%E8%AF%81%E6%95%B0%E6%8D%AE%E7%9A%84%E5%87%BD%E6%95%B0"><i class="fa fa-check"></i><b>2.1</b> 验证数据的函数</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="01-data.html"><a href="#%E9%AA%8C%E8%AF%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><i class="fa fa-check"></i><b>2.1.1</b> 验证数据类型</a></li>
<li class="chapter" data-level="2.1.2" data-path="01-data.html"><a href="#%E9%AA%8C%E8%AF%81%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7"><i class="fa fa-check"></i><b>2.1.2</b> 验证数据完整性</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="01-data.html"><a href="#%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE"><i class="fa fa-check"></i><b>2.2</b> 提取数据</a></li>
<li class="chapter" data-level="2.3" data-path="01-data.html"><a href="#%E6%95%B0%E6%8D%AE%E7%9A%84%E7%AE%80%E5%8D%95%E8%AE%A1%E7%AE%97"><i class="fa fa-check"></i><b>2.3</b> 数据的简单计算</a></li>
<li class="chapter" data-level="2.4" data-path="01-data.html"><a href="#%E5%BA%8F%E5%88%97%E8%AE%A1%E7%AE%97%E5%87%BD%E6%95%B0"><i class="fa fa-check"></i><b>2.4</b> 序列计算函数</a></li>
<li class="chapter" data-level="2.5" data-path="01-data.html"><a href="#%E8%AE%A1%E7%AE%97%E6%94%B6%E7%9B%8A%E7%8E%87"><i class="fa fa-check"></i><b>2.5</b> 计算收益率</a></li>
<li class="chapter" data-level="2.6" data-path="01-data.html"><a href="#%E5%BA%8F%E5%88%97%E7%9A%84%E6%BB%9E%E5%90%8E%E5%89%8D%E7%A7%BB%E4%B8%8E%E9%80%89%E5%8F%96"><i class="fa fa-check"></i><b>2.6</b> 序列的滞后/前移与选取</a></li>
<li class="chapter" data-level="2.7" data-path="01-data.html"><a href="#%E8%AE%A1%E7%AE%97%E5%B3%B0%E5%80%BC%E5%B3%B0%E8%B0%B7"><i class="fa fa-check"></i><b>2.7</b> 计算峰值/峰谷</a></li>
<li class="chapter" data-level="2.8" data-path="01-data.html"><a href="#%E8%AE%A1%E7%AE%97%E6%9E%81%E5%80%BC"><i class="fa fa-check"></i><b>2.8</b> 计算极值</a></li>
<li class="chapter" data-level="2.9" data-path="01-data.html"><a href="#%E5%B7%AE%E5%88%86%E9%98%88%E5%80%BC%E5%87%BD%E6%95%B0"><i class="fa fa-check"></i><b>2.9</b> 差分/阈值函数</a></li>
<li class="chapter" data-level="2.10" data-path="01-data.html"><a href="#%E6%97%A5%E6%9C%9F%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0"><i class="fa fa-check"></i><b>2.10</b> 日期转换函数</a>
<ul>
<li class="chapter" data-level="2.10.1" data-path="01-data.html"><a href="#%E6%97%A5%E5%91%A8%E8%BD%AC%E6%8D%A2%E5%8F%8A%E6%97%A5%E6%9C%88%E8%BD%AC%E6%8D%A2"><i class="fa fa-check"></i><b>2.10.1</b> 日/周转换及日/月转换</a></li>
<li class="chapter" data-level="2.10.2" data-path="01-data.html"><a href="#%E6%95%B0%E6%8D%AE%E5%91%A8%E6%9C%9F%E7%9A%84%E6%99%BA%E8%83%BD%E8%AF%86%E5%88%AB"><i class="fa fa-check"></i><b>2.10.2</b> 数据周期的智能识别</a></li>
<li class="chapter" data-level="2.10.3" data-path="01-data.html"><a href="#%E5%91%A8%E6%9C%9F%E7%89%B9%E5%BE%81%E8%AE%A1%E7%AE%97"><i class="fa fa-check"></i><b>2.10.3</b> 周期特征计算</a></li>
<li class="chapter" data-level="2.10.4" data-path="01-data.html"><a href="#%E8%AE%A1%E7%AE%97%E5%91%A8%E6%9C%9F%E6%9C%80%E5%A4%A7%E5%80%BC"><i class="fa fa-check"></i><b>2.10.4</b> 计算周期最大值</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="graphs.html"><a href="graphs.html"><i class="fa fa-check"></i><b>3</b> 图形分析</a>
<ul>
<li class="chapter" data-level="3.1" data-path="01-data.html"><a href="#%E5%9F%BA%E6%9C%AC%E7%BB%98%E5%9B%BE%E5%87%BD%E6%95%B0"><i class="fa fa-check"></i><b>3.1</b> 基本绘图函数</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="01-data.html"><a href="#%E5%85%A8%E8%83%BD%E7%BB%98%E5%9B%BE%E5%BC%95%E6%93%8E-chartseries"><i class="fa fa-check"></i><b>3.1.1</b> 全能绘图引擎 chartSeries</a></li>
<li class="chapter" data-level="3.1.2" data-path="01-data.html"><a href="#%E5%8A%A8%E6%80%81%E6%9B%B4%E6%96%B0%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7-rechart"><i class="fa fa-check"></i><b>3.1.2</b> 动态更新的可视化效率工具 reChart</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="01-data.html"><a href="#%E4%B8%89%E7%A7%8D%E5%9F%BA%E6%9C%AC%E5%9B%BE%E5%BD%A2"><i class="fa fa-check"></i><b>3.2</b> 三种基本图形</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="01-data.html"><a href="#%E6%9D%A1%E5%BD%A2%E5%9B%BE"><i class="fa fa-check"></i><b>3.2.1</b> 条形图</a></li>
<li class="chapter" data-level="3.2.2" data-path="01-data.html"><a href="#%E8%9C%A1%E7%83%9B%E5%9B%BE"><i class="fa fa-check"></i><b>3.2.2</b> 蜡烛图</a></li>
<li class="chapter" data-level="3.2.3" data-path="01-data.html"><a href="#%E7%BA%BF%E5%9B%BE"><i class="fa fa-check"></i><b>3.2.3</b> 线图</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="01-data.html"><a href="#%E5%9B%BE%E5%BD%A2%E4%B8%BB%E9%A2%98%E5%AE%9A%E5%88%B6"><i class="fa fa-check"></i><b>3.3</b> 图形主题定制</a></li>
<li class="chapter" data-level="3.4" data-path="01-data.html"><a href="#%E5%9B%BE%E5%BD%A2%E7%BC%A9%E6%94%BE"><i class="fa fa-check"></i><b>3.4</b> 图形缩放</a></li>
<li class="chapter" data-level="3.5" data-path="01-data.html"><a href="#%E5%9B%BE%E5%BD%A2%E5%AD%98%E5%82%A8"><i class="fa fa-check"></i><b>3.5</b> 图形存储</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="TTR.html"><a href="TTR.html"><i class="fa fa-check"></i><b>4</b> 技术分析图</a>
<ul>
<li class="chapter" data-level="4.1" data-path="01-data.html"><a href="#%E8%B6%8B%E5%8A%BF%E7%B1%BB%E6%8C%87%E6%A0%87%E5%9B%BE"><i class="fa fa-check"></i><b>4.1</b> 趋势类指标图</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="01-data.html"><a href="#%E6%8A%9B%E7%89%A9%E7%BA%BF%E6%8C%87%E6%A0%87-sar%E8%B6%8B%E5%8A%BF%E8%B7%9F%E8%B8%AA%E4%B8%8E%E6%AD%A2%E6%8D%9F%E7%AD%96%E7%95%A5%E7%9A%84%E5%8A%A8%E6%80%81%E5%B9%B3%E8%A1%A1%E5%99%A8"><i class="fa fa-check"></i><b>4.1.1</b> 抛物线指标 SAR：趋势跟踪与止损策略的动态平衡器</a></li>
<li class="chapter" data-level="4.1.2" data-path="01-data.html"><a href="#%E5%B9%B3%E5%9D%87%E8%B6%8B%E5%90%91%E6%8C%87%E6%A0%87-adx%E8%B6%8B%E5%8A%BF%E5%BC%BA%E5%BA%A6%E7%9A%84%E7%B2%BE%E7%A1%AE%E5%BA%A6%E9%87%8F%E4%B8%8E%E4%BA%A4%E6%98%93%E6%97%B6%E6%9C%BA%E8%BF%87%E6%BB%A4%E5%99%A8"><i class="fa fa-check"></i><b>4.1.2</b> 平均趋向指标 ADX：趋势强度的精确度量与交易时机过滤器</a></li>
<li class="chapter" data-level="4.1.3" data-path="01-data.html"><a href="#%E7%AE%80%E5%8D%95%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E7%BA%BF-sma%E8%B6%8B%E5%8A%BF%E8%AF%86%E5%88%AB%E4%B8%8E%E5%8A%A8%E6%80%81%E6%94%AF%E6%92%91%E9%98%BB%E5%8A%9B%E7%9A%84%E5%9F%BA%E7%9F%B3"><i class="fa fa-check"></i><b>4.1.3</b> 简单移动平均线 SMA：趋势识别与动态支撑阻力的基石</a></li>
<li class="chapter" data-level="4.1.4" data-path="01-data.html"><a href="#%E6%8C%87%E6%95%B0%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E7%BA%BF-ema%E4%BB%B7%E6%A0%BC%E5%8A%A8%E9%87%8F%E7%9A%84%E7%81%B5%E6%95%8F%E6%8D%95%E6%8D%89%E5%99%A8%E4%B8%8E%E8%B6%8B%E5%8A%BF%E6%8B%90%E7%82%B9%E5%85%88%E8%A1%8C%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.1.4</b> 指数移动平均线 EMA：价格动量的灵敏捕捉器与趋势拐点先行指标</a></li>
<li class="chapter" data-level="4.1.5" data-path="01-data.html"><a href="#%E5%8F%8C%E6%8C%87%E6%95%B0%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E7%BA%BF-dema%E6%B6%88%E9%99%A4%E6%BB%9E%E5%90%8E%E7%9A%84%E8%B6%8B%E5%8A%BF%E5%8A%A0%E9%80%9F%E5%BC%95%E6%93%8E%E4%B8%8E%E6%8B%90%E7%82%B9%E7%A1%AE%E8%AE%A4%E5%88%A9%E5%99%A8"><i class="fa fa-check"></i><b>4.1.5</b> 双指数移动平均线 DEMA：消除滞后的趋势加速引擎与拐点确认利器</a></li>
<li class="chapter" data-level="4.1.6" data-path="01-data.html"><a href="#%E5%8A%A0%E6%9D%83%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E7%BA%BF-wma%E7%B2%BE%E7%BB%86%E4%BB%B7%E6%A0%BC%E6%9D%83%E9%87%8D%E5%88%86%E9%85%8D%E7%9A%84%E8%B6%8B%E5%8A%BF%E5%BA%A6%E9%87%8F%E8%A1%A1%E4%B8%8E%E7%9F%AD%E6%9C%9F%E6%B3%A2%E5%8A%A8%E8%BF%87%E6%BB%A4%E5%99%A8"><i class="fa fa-check"></i><b>4.1.6</b> 加权移动平均线 WMA：精细价格权重分配的趋势度量衡与短期波动过滤器</a></li>
<li class="chapter" data-level="4.1.7" data-path="01-data.html"><a href="#%E9%9B%B6%E6%BB%9E%E5%90%8E%E6%8C%87%E6%95%B0%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E7%BA%BF-zlema%E6%B6%88%E9%99%A4%E8%B6%8B%E5%8A%BF%E6%BB%9E%E5%90%8E%E7%9A%84%E7%9F%AD%E7%BA%BF%E4%BA%A4%E6%98%93%E5%88%A9%E5%99%A8"><i class="fa fa-check"></i><b>4.1.7</b> 零滞后指数移动平均线 ZLEMA：消除趋势滞后的短线交易利器</a></li>
<li class="chapter" data-level="4.1.8" data-path="01-data.html"><a href="#%E5%BC%B9%E6%80%A7%E6%88%90%E4%BA%A4%E9%87%8F%E5%8A%A0%E6%9D%83%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E7%BA%BF-evwma%E9%87%8F%E4%BB%B7%E7%BB%93%E5%90%88%E7%9A%84%E8%B6%8B%E5%8A%BF%E7%A1%AE%E8%AE%A4%E5%88%A9%E5%99%A8"><i class="fa fa-check"></i><b>4.1.8</b> 弹性成交量加权移动平均线 EVWMA：量价结合的趋势确认利器</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="01-data.html"><a href="#%E9%9C%87%E8%8D%A1%E7%B1%BB%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.2</b> 震荡类指标</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="01-data.html"><a href="#%E7%9B%B8%E5%AF%B9%E5%BC%BA%E5%BC%B1%E6%8C%87%E6%A0%87-rsi%E5%B8%82%E5%9C%BA%E5%8A%A8%E9%87%8F%E7%9A%84%E5%9D%87%E8%A1%A1%E5%A4%A9%E5%B9%B3"><i class="fa fa-check"></i><b>4.2.1</b> 相对强弱指标 RSI：市场动量的均衡天平</a></li>
<li class="chapter" data-level="4.2.2" data-path="01-data.html"><a href="#%E9%9A%8F%E6%9C%BA%E6%8C%87%E6%A0%87-kdj%E4%BB%B7%E6%A0%BC%E5%8A%A8%E9%87%8F%E7%9A%84%E7%B2%BE%E5%87%86%E5%BA%A6%E9%87%8F%E8%A1%A1"><i class="fa fa-check"></i><b>4.2.2</b> 随机指标 KDJ：价格动量的精准度量衡</a></li>
<li class="chapter" data-level="4.2.3" data-path="01-data.html"><a href="#%E5%A8%81%E5%BB%89%E6%8C%87%E6%A0%87-wpr%E5%8F%8D%E5%90%91%E8%A7%86%E8%A7%92%E4%B8%8B%E7%9A%84%E8%B6%85%E4%B9%B0%E8%B6%85%E5%8D%96%E6%8E%A2%E6%B5%8B%E5%99%A8"><i class="fa fa-check"></i><b>4.2.3</b> 威廉指标 WPR：反向视角下的超买超卖探测器</a></li>
<li class="chapter" data-level="4.2.4" data-path="01-data.html"><a href="#chande-%E5%8A%A8%E9%87%8F%E6%91%86%E5%8A%A8%E6%8C%87%E6%A0%87-cmo%E4%BB%B7%E6%A0%BC%E5%8A%A8%E8%83%BD%E7%9A%84%E7%B2%BE%E7%A1%AE%E6%B5%8B%E9%87%8F%E4%BB%AA"><i class="fa fa-check"></i><b>4.2.4</b> Chande 动量摆动指标 CMO：价格动能的精确测量仪</a></li>
<li class="chapter" data-level="4.2.5" data-path="01-data.html"><a href="#%E9%9A%8F%E6%9C%BA%E5%8A%A8%E9%87%8F%E6%8C%87%E6%A0%87-smi%E7%B2%BE%E5%87%86%E8%BF%87%E6%BB%A4%E5%99%AA%E9%9F%B3%E7%9A%84%E8%B6%8B%E5%8A%BF%E5%8F%8D%E8%BD%AC%E6%8E%A2%E6%B5%8B%E5%99%A8"><i class="fa fa-check"></i><b>4.2.5</b> 随机动量指标 SMI：精准过滤噪音的趋势反转探测器</a></li>
<li class="chapter" data-level="4.2.6" data-path="01-data.html"><a href="#%E4%BB%B7%E6%A0%BC%E5%8F%98%E5%8A%A8%E7%8E%87%E6%8C%87%E6%A0%87-roc%E5%B8%82%E5%9C%BA%E5%8A%A8%E8%83%BD%E7%9A%84%E6%B5%8B%E9%80%9F%E4%BB%AA"><i class="fa fa-check"></i><b>4.2.6</b> 价格变动率指标 ROC：市场动能的测速仪</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="01-data.html"><a href="#%E6%B3%A2%E5%8A%A8%E7%8E%87%E7%B1%BB%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.3</b> 波动率类指标</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="01-data.html"><a href="#%E5%B8%83%E6%9E%97%E5%B8%A6-bbands%E5%B8%82%E5%9C%BA%E6%B3%A2%E5%8A%A8%E7%9A%84%E5%8A%A8%E6%80%81%E6%A0%87%E5%B0%BA"><i class="fa fa-check"></i><b>4.3.1</b> 布林带 BBands：市场波动的动态标尺</a></li>
<li class="chapter" data-level="4.3.2" data-path="01-data.html"><a href="#%E5%8C%85%E7%BB%9C%E7%BA%BF-envelope%E4%BB%B7%E6%A0%BC%E6%B3%A2%E5%8A%A8%E7%9A%84%E5%9B%BA%E5%AE%9A%E5%8C%BA%E9%97%B4%E6%A0%87%E5%B0%BA"><i class="fa fa-check"></i><b>4.3.2</b> 包络线 Envelope：价格波动的固定区间标尺</a></li>
<li class="chapter" data-level="4.3.3" data-path="01-data.html"><a href="#%E5%B9%B3%E5%9D%87%E7%9C%9F%E5%AE%9E%E6%B3%A2%E5%B9%85-atr%E5%B8%82%E5%9C%BA%E6%B3%A2%E5%8A%A8%E6%80%A7%E7%9A%84%E7%B2%BE%E5%87%86%E5%BA%A6%E9%87%8F"><i class="fa fa-check"></i><b>4.3.3</b> 平均真实波幅 ATR：市场波动性的精准度量</a></li>
<li class="chapter" data-level="4.3.4" data-path="01-data.html"><a href="#%E5%8C%BA%E9%97%B4%E9%9C%87%E8%8D%A1%E7%BA%BF-dpo%E4%BB%B7%E6%A0%BC%E5%91%A8%E6%9C%9F%E4%B8%8E%E8%B6%85%E4%B9%B0%E8%B6%85%E5%8D%96%E7%9A%84%E7%B2%BE%E5%87%86%E5%BA%A6%E9%87%8F"><i class="fa fa-check"></i><b>4.3.4</b> 区间震荡线 DPO：价格周期与超买超卖的精准度量</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="01-data.html"><a href="#%E6%88%90%E4%BA%A4%E9%87%8F%E7%B1%BB%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.4</b> 成交量类指标</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="01-data.html"><a href="#%E6%88%90%E4%BA%A4%E9%87%8F%E6%8C%87%E6%A0%87-vo%E5%B8%82%E5%9C%BA%E5%8A%A8%E8%83%BD%E4%B8%8E%E8%B6%8B%E5%8A%BF%E7%A1%AE%E8%AE%A4%E7%9A%84%E6%A0%B8%E5%BF%83%E5%B7%A5%E5%85%B7"><i class="fa fa-check"></i><b>4.4.1</b> 成交量指标 Vo：市场动能与趋势确认的核心工具</a></li>
<li class="chapter" data-level="4.4.2" data-path="01-data.html"><a href="#chaikin-%E8%B5%84%E9%87%91%E6%B5%81%E9%87%8F-cmf%E9%87%8F%E4%BB%B7%E7%BB%93%E5%90%88%E7%9A%84%E8%B5%84%E9%87%91%E5%8A%A8%E8%83%BD%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.4.2</b> Chaikin 资金流量 CMF：量价结合的资金动能指标</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="01-data.html"><a href="#%E7%89%B9%E6%AE%8A%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.5</b> 特殊技术指标</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="01-data.html"><a href="#%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E6%94%B6%E6%95%9B%E5%8F%91%E6%95%A3%E6%8C%87%E6%A0%87-macd%E8%B6%8B%E5%8A%BF%E4%B8%8E%E5%8A%A8%E9%87%8F%E7%9A%84%E5%8F%8C%E9%87%8D%E5%BA%A6%E9%87%8F"><i class="fa fa-check"></i><b>4.5.1</b> 移动平均收敛发散指标 MACD：趋势与动量的双重度量</a></li>
<li class="chapter" data-level="4.5.2" data-path="01-data.html"><a href="#%E5%8A%A8%E9%87%8F%E6%8C%87%E6%A0%87-momentum%E4%BB%B7%E6%A0%BC%E5%8F%98%E5%8A%A8%E9%80%9F%E5%BA%A6%E7%9A%84%E7%B2%BE%E5%87%86%E5%BA%A6%E9%87%8F"><i class="fa fa-check"></i><b>4.5.2</b> 动量指标 Momentum：价格变动速度的精准度量</a></li>
<li class="chapter" data-level="4.5.3" data-path="01-data.html"><a href="#%E9%A1%BA%E5%8A%BF%E6%8C%87%E6%A0%87-cci%E4%BB%B7%E6%A0%BC%E5%81%8F%E7%A6%BB%E5%BA%A6%E4%B8%8E%E8%B6%8B%E5%8A%BF%E5%8F%8D%E8%BD%AC%E7%9A%84%E5%8A%A8%E6%80%81%E7%9B%91%E6%B5%8B"><i class="fa fa-check"></i><b>4.5.3</b> 顺势指标 CCI：价格偏离度与趋势反转的动态监测</a></li>
<li class="chapter" data-level="4.5.4" data-path="01-data.html"><a href="#%E5%90%88%E7%BA%A6%E7%BB%88%E6%AD%A2%E7%BA%BF-expiry%E6%9C%9F%E8%B4%A7%E5%B8%82%E5%9C%BA%E6%97%B6%E9%97%B4%E7%BB%B4%E5%BA%A6%E7%9A%84%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><i class="fa fa-check"></i><b>4.5.4</b> 合约终止线 Expiry：期货市场时间维度的风险管理工具</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="01-data.html"><a href="#%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0quantmod-%E5%8C%85%E7%9A%84%E6%8C%87%E6%A0%87%E5%AE%9A%E5%88%B6%E4%B8%8E%E5%9B%BE%E8%A1%A8%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><i class="fa fa-check"></i><b>4.6</b> 辅助函数：quantmod 包的指标定制与图表管理工具</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="01-data.html"><a href="#%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E7%BB%98%E5%9B%BE%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.6.1</b> 设置默认绘图指标</a></li>
<li class="chapter" data-level="4.6.2" data-path="01-data.html"><a href="#%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.6.2</b> 添加自定义指标</a></li>
<li class="chapter" data-level="4.6.3" data-path="01-data.html"><a href="#%E5%88%9B%E5%BB%BA%E6%96%B0%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.6.3</b> 创建新指标</a></li>
<li class="chapter" data-level="4.6.4" data-path="01-data.html"><a href="#%E6%9F%A5%E7%9C%8B%E5%B7%B2%E6%B7%BB%E5%8A%A0%E7%9A%84%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.6.4</b> 查看已添加的指标</a></li>
<li class="chapter" data-level="4.6.5" data-path="01-data.html"><a href="#%E6%9E%84%E5%BB%BA%E7%BB%BC%E5%90%88%E5%88%86%E6%9E%90%E5%9B%BE%E8%A1%A8"><i class="fa fa-check"></i><b>4.6.5</b> 构建综合分析图表</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="model.html"><a href="model.html"><i class="fa fa-check"></i><b>5</b> 量化建模与回测：从模型设定到策略验证</a>
<ul>
<li class="chapter" data-level="5.1" data-path="01-data.html"><a href="#%E6%A8%A1%E5%9E%8B%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B"><i class="fa fa-check"></i><b>5.1</b> 模型构建流程</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="01-data.html"><a href="#%E8%AE%BE%E5%AE%9A%E6%A8%A1%E5%9E%8B%E5%BD%A2%E5%BC%8F"><i class="fa fa-check"></i><b>5.1.1</b> 设定模型形式</a></li>
<li class="chapter" data-level="5.1.2" data-path="01-data.html"><a href="#%E6%9F%A5%E7%9C%8B%E6%A8%A1%E5%9E%8B%E6%95%B0%E6%8D%AE"><i class="fa fa-check"></i><b>5.1.2</b> 查看模型数据</a></li>
<li class="chapter" data-level="5.1.3" data-path="01-data.html"><a href="#%E4%BC%B0%E8%AE%A1%E6%A8%A1%E5%9E%8B%E5%8F%82%E6%95%B0"><i class="fa fa-check"></i><b>5.1.3</b> 估计模型参数</a></li>
<li class="chapter" data-level="5.1.4" data-path="01-data.html"><a href="#%E6%A8%A1%E5%9E%8B%E7%BB%93%E6%9E%9C%E6%8F%90%E5%8F%96"><i class="fa fa-check"></i><b>5.1.4</b> 模型结果提取</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="01-data.html"><a href="#%E7%AD%96%E7%95%A5%E5%9B%9E%E6%B5%8B%E4%B8%8E%E8%AF%84%E4%BC%B0"><i class="fa fa-check"></i><b>5.2</b> 策略回测与评估</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i>结语</a></li>
<li class="appendix"><span><b>附录</b></span></li>
<li class="chapter" data-level="A" data-path="quantbooks.html"><a href="quantbooks.html"><i class="fa fa-check"></i><b>A</b> R 量化投资系列书籍</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>参考文献</a></li>
<li class="divider"></li>
<li><a href="https://gewutang.org" target="blank">本书由邓一硕出品</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">quantmod：从数据获取到策略实战全景指南</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">第 1 章</span> 数据获取指南<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>在金融数据分析领域，获取高质量的数据是开展有效分析的基础。quantmod 包作为 R 语言中处理金融时间序列数据的强大工具，提供了多种数据导入方式。本文将详细介绍如何使用 quantmod 包从网络获取金融数据以及相关参数的使用方法。</p>
<p>在使用 quantmod 包获取数据之前，需要先安装并加载该包。</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data.html#cb3-1" tabindex="-1"></a><span class="co"># 安装quantmod包（如未安装）</span></span>
<span id="cb3-2"><a href="data.html#cb3-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;quantmod&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data.html#cb4-1" tabindex="-1"></a><span class="co"># 加载包</span></span>
<span id="cb4-2"><a href="data.html#cb4-2" tabindex="-1"></a><span class="fu">require</span>(quantmod)</span>
<span id="cb4-3"><a href="data.html#cb4-3" tabindex="-1"></a><span class="co"># 查看函数的参数信息</span></span>
<span id="cb4-4"><a href="data.html#cb4-4" tabindex="-1"></a><span class="fu">args</span>(getSymbols)</span></code></pre></div>
<pre><code>## function (Symbols = NULL, env = parent.frame(), reload.Symbols = FALSE, 
##     verbose = FALSE, warnings = TRUE, src = &quot;yahoo&quot;, symbol.lookup = TRUE, 
##     auto.assign = getOption(&quot;getSymbols.auto.assign&quot;, TRUE), 
##     ...) 
## NULL</code></pre>
<p>getSymbols 函数是 quantmod 包中用于从网络获取金融数据的核心函数，其主要参数如表 @ref{tab:param} 所示：</p>
<table>
<caption><span id="tab:param">表 1.1: </span>参数与用途对照表</caption>
<colgroup>
<col width="20%" />
<col width="79%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">参数</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Symbols</td>
<td align="left">指定股票符号或者代码。</td>
</tr>
<tr class="even">
<td align="left">env</td>
<td align="left">指定对象的创建位置。</td>
</tr>
<tr class="odd">
<td align="left">reload.Symbols</td>
<td align="left">是否在指定环境中重新载入数据，缺省设置为 FALSE。</td>
</tr>
<tr class="even">
<td align="left">warnings</td>
<td align="left">是否输出警告信息，缺省设置为 TRUE。</td>
</tr>
<tr class="odd">
<td align="left">src</td>
<td align="left">指定抓取数据的网址，缺省设置为 yahoo，也可以选择 google 。</td>
</tr>
<tr class="even">
<td align="left">symbol.lookup</td>
<td align="left">从外部查找检索股票代码的路径。</td>
</tr>
<tr class="odd">
<td align="left">auto.assign</td>
<td align="left">是否将函数结构自动载入到工作环境。</td>
</tr>
<tr class="even">
<td align="left">file.path</td>
<td align="left">指定文件路径的字符串。</td>
</tr>
<tr class="odd">
<td align="left">…</td>
<td align="left">其它参数。</td>
</tr>
</tbody>
</table>
<p>getSymbols 函数支持多种数据源，主要包括：</p>
<ul>
<li>Yahoo Finance：提供全球股票、指数的日交易数据、股息数据和拆股数据</li>
<li>Google Finance：提供股票价格数据和基本图表功能</li>
<li>FRED (Federal Reserve Economic Data)：提供美联储发布的宏观经济数据</li>
<li>OANDA：提供外汇市场的实时和历史汇率数据</li>
</ul>
<p>通过这些数据源，我们可以获取上市公司的股票日交易数据、股息数据、拆股数据、财务报表数据、汇市数据、重金属交易数据以及美联储官网公布的一些经济数据。</p>
<p>下面通过具体示例展示如何使用 getSymbols 函数从不同数据源获取金融数据：</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data.html#cb6-1" tabindex="-1"></a><span class="co"># 从Yahoo Finance获取苹果公司(AAPL)的股票数据</span></span>
<span id="cb6-2"><a href="data.html#cb6-2" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;AAPL&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;AAPL&quot;</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data.html#cb8-1" tabindex="-1"></a><span class="co"># 从Yahoo Finance获取中国移动(600941.SS)的股票数据</span></span>
<span id="cb8-2"><a href="data.html#cb8-2" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;600941.SS&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;600941.SS&quot;</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data.html#cb10-1" tabindex="-1"></a><span class="co"># 从OANDA获取欧元兑美元的汇率数据</span></span>
<span id="cb10-2"><a href="data.html#cb10-2" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;EUR/USD&quot;</span>, <span class="at">src =</span> <span class="st">&quot;oanda&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;EUR/USD&quot;</code></pre>
<p>在实际应用中，我们可以结合 getSymbols 函数的参数进行更灵活的数据获取：</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data.html#cb12-1" tabindex="-1"></a><span class="co"># 获取多只股票数据并保存到指定环境</span></span>
<span id="cb12-2"><a href="data.html#cb12-2" tabindex="-1"></a>myEnv <span class="ot">&lt;-</span> <span class="fu">new.env</span>()</span>
<span id="cb12-3"><a href="data.html#cb12-3" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="fu">c</span>(<span class="st">&quot;AAPL&quot;</span>, <span class="st">&quot;MSFT&quot;</span>, <span class="st">&quot;GOOG&quot;</span>), <span class="at">env =</span> myEnv)</span></code></pre></div>
<pre><code>## [1] &quot;AAPL&quot; &quot;MSFT&quot; &quot;GOOG&quot;</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data.html#cb14-1" tabindex="-1"></a><span class="co"># 禁用自动赋值，将结果存储到变量中</span></span>
<span id="cb14-2"><a href="data.html#cb14-2" tabindex="-1"></a>aapl_data <span class="ot">&lt;-</span> <span class="fu">getSymbols</span>(<span class="st">&quot;AAPL&quot;</span>, <span class="at">auto.assign =</span> <span class="cn">FALSE</span>)</span>
<span id="cb14-3"><a href="data.html#cb14-3" tabindex="-1"></a><span class="co"># 获取数据时不显示警告信息</span></span>
<span id="cb14-4"><a href="data.html#cb14-4" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;AAPL&quot;</span>, <span class="at">warnings =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] &quot;AAPL&quot;</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data.html#cb16-1" tabindex="-1"></a><span class="co"># 重新加载已存在的数据</span></span>
<span id="cb16-2"><a href="data.html#cb16-2" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;AAPL&quot;</span>, <span class="at">reload.Symbols =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Warning: BTC-USD contains missing values.
## Some functions will not work if objects
## contain missing values in the middle of the
## series. Consider using na.omit(),
## na.approx(), na.fill(), etc to remove or
## replace them.</code></pre>
<pre><code>## [1] &quot;AAPL&quot;      &quot;600941.SS&quot; &quot;BTC-USD&quot;  
## [4] &quot;EUR/USD&quot;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data.html#cb19-1" tabindex="-1"></a><span class="co"># 使用自定义的股票代码映射</span></span>
<span id="cb19-2"><a href="data.html#cb19-2" tabindex="-1"></a><span class="fu">setSymbolLookup</span>(<span class="at">ChinaMobile=</span><span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;600941.SS&quot;</span>, <span class="at">src=</span><span class="st">&quot;yahoo&quot;</span>))</span>
<span id="cb19-3"><a href="data.html#cb19-3" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;ChinaMobile&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ChinaMobile&quot;</code></pre>
<p>通过以上方法，可以根据实际需求灵活获取各种金融数据，为后续的数据分析和建模工作做好准备。quantmod 包还提供了丰富的函数用于数据处理、可视化和统计分析，结合这些功能可以构建完整的金融数据分析工作流。</p>
<div id="股票日交易数据获取指南" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> 股票日交易数据获取指南<a href="#%E8%82%A1%E7%A5%A8%E6%97%A5%E4%BA%A4%E6%98%93%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="中国市场数据获取" class="section level3 hasAnchor" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> 中国市场数据获取<a href="#%E4%B8%AD%E5%9B%BD%E5%B8%82%E5%9C%BA%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>在中国市场的金融数据获取中，quantmod 包的 getSymbols 函数通过特定代码格式实现数据源指定与数据抓取。中国股票市场以上海证券交易所（上交所）和深圳证券交易所（深交所）为核心，对应的数据后缀规则为：上交所股票需添加 .ss 后缀（如中国移动代码 600941.SS ），深交所股票则使用 .sz 后缀（如平安银行代码 000001.sz ）。这种标准化的代码格式不仅确保了数据接口的一致性，还能通过统一的函数调用实现跨市场数据获取，为后续的量化分析与策略开发提供规范化的数据基础。</p>
<p>以下是获取中国市场不同股票和指数数据的示例代码：</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data.html#cb21-1" tabindex="-1"></a><span class="co"># 加载quantmod包</span></span>
<span id="cb21-2"><a href="data.html#cb21-2" tabindex="-1"></a><span class="fu">library</span>(quantmod)</span>
<span id="cb21-3"><a href="data.html#cb21-3" tabindex="-1"></a><span class="co"># 获取中国移动通讯公司股票数据（上交所代码：600941）</span></span>
<span id="cb21-4"><a href="data.html#cb21-4" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;600941.SS&quot;</span>)</span>
<span id="cb21-5"><a href="data.html#cb21-5" tabindex="-1"></a><span class="co"># 获取特定股票数据示例（代码：600635，上交所）</span></span>
<span id="cb21-6"><a href="data.html#cb21-6" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;600635.ss&quot;</span>)</span>
<span id="cb21-7"><a href="data.html#cb21-7" tabindex="-1"></a><span class="co"># 获取上证指数系列数据</span></span>
<span id="cb21-8"><a href="data.html#cb21-8" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;000001.ss&quot;</span>)  <span class="co"># 上证A股指数</span></span>
<span id="cb21-9"><a href="data.html#cb21-9" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;000002.ss&quot;</span>)  <span class="co"># 上证A股综合指数</span></span>
<span id="cb21-10"><a href="data.html#cb21-10" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;000003.ss&quot;</span>)  <span class="co"># 上证B股指数</span></span>
<span id="cb21-11"><a href="data.html#cb21-11" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;000008.ss&quot;</span>)  <span class="co"># 上证综合指数</span></span>
<span id="cb21-12"><a href="data.html#cb21-12" tabindex="-1"></a><span class="co"># 获取沪深300指数数据</span></span>
<span id="cb21-13"><a href="data.html#cb21-13" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;000300.ss&quot;</span>)</span>
<span id="cb21-14"><a href="data.html#cb21-14" tabindex="-1"></a><span class="co"># 获取深圳证券交易所指数数据</span></span>
<span id="cb21-15"><a href="data.html#cb21-15" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;399001.sz&quot;</span>)  <span class="co"># 深圳成指</span></span>
<span id="cb21-16"><a href="data.html#cb21-16" tabindex="-1"></a><span class="co"># 获取特定公司股票数据（三一重工，上交所代码：600030）</span></span>
<span id="cb21-17"><a href="data.html#cb21-17" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;600030.ss&quot;</span>)</span></code></pre></div>
</div>
<div id="获取美国市场数据" class="section level3 hasAnchor" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> 获取美国市场数据<a href="#%E8%8E%B7%E5%8F%96%E7%BE%8E%E5%9B%BD%E5%B8%82%E5%9C%BA%E6%95%B0%E6%8D%AE" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>获取美国市场的股票数据同样使用getSymbols函数，但美国股票代码通常不需要添加后缀。以下是获取美国市场知名公司股票数据的示例代码：</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data.html#cb22-1" tabindex="-1"></a><span class="co"># 获取苹果公司股票数据（纳斯达克代码：AAPL）</span></span>
<span id="cb22-2"><a href="data.html#cb22-2" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;AAPL&quot;</span>)</span>
<span id="cb22-3"><a href="data.html#cb22-3" tabindex="-1"></a><span class="co"># 获取新东方教育科技集团股票数据（纳斯达克代码：EDU）</span></span>
<span id="cb22-4"><a href="data.html#cb22-4" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;EDU&quot;</span>)</span>
<span id="cb22-5"><a href="data.html#cb22-5" tabindex="-1"></a><span class="co"># 获取比特币数据（代码为：BTC-USD）</span></span>
<span id="cb22-6"><a href="data.html#cb22-6" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;BTC-USD&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="交易数据的管理与重命名" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> 交易数据的管理与重命名<a href="#%E4%BA%A4%E6%98%93%E6%95%B0%E6%8D%AE%E7%9A%84%E7%AE%A1%E7%90%86%E4%B8%8E%E9%87%8D%E5%91%BD%E5%90%8D" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>在实际应用中，直接使用股票代码获取的数据对象名往往不易记忆和使用。我们可以通过 setSymbolLookup 函数建立自定义代码映射，为数据对象设置更具描述性的名称。</p>
<p>以下是数据重命名的示例代码：</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data.html#cb23-1" tabindex="-1"></a><span class="co"># 为上证A股综合指数设置自定义名称&quot;A.Share.index&quot;</span></span>
<span id="cb23-2"><a href="data.html#cb23-2" tabindex="-1"></a><span class="fu">setSymbolLookup</span>(<span class="at">A.Share.index=</span><span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;000002.ss&quot;</span>, <span class="at">src=</span><span class="st">&quot;yahoo&quot;</span>))</span>
<span id="cb23-3"><a href="data.html#cb23-3" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;A.Share.index&quot;</span>)</span>
<span id="cb23-4"><a href="data.html#cb23-4" tabindex="-1"></a></span>
<span id="cb23-5"><a href="data.html#cb23-5" tabindex="-1"></a><span class="co"># 为上证综合指数设置自定义名称&quot;Conglomerate.index&quot;</span></span>
<span id="cb23-6"><a href="data.html#cb23-6" tabindex="-1"></a><span class="fu">setSymbolLookup</span>(<span class="at">Conglomerate.index=</span><span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;000008.ss&quot;</span>, <span class="at">src=</span><span class="st">&quot;yahoo&quot;</span>))</span>
<span id="cb23-7"><a href="data.html#cb23-7" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;Conglomerate.index&quot;</span>)</span>
<span id="cb23-8"><a href="data.html#cb23-8" tabindex="-1"></a><span class="co"># 为沪深300指数设置自定义名称&quot;CSI300&quot;</span></span>
<span id="cb23-9"><a href="data.html#cb23-9" tabindex="-1"></a><span class="fu">setSymbolLookup</span>(<span class="at">CSI300=</span><span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;000300.ss&quot;</span>, <span class="at">src=</span><span class="st">&quot;yahoo&quot;</span>))</span>
<span id="cb23-10"><a href="data.html#cb23-10" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;CSI300&quot;</span>)</span>
<span id="cb23-11"><a href="data.html#cb23-11" tabindex="-1"></a><span class="co"># 为深圳成指设置自定义名称&quot;component.index&quot;，并自动赋值</span></span>
<span id="cb23-12"><a href="data.html#cb23-12" tabindex="-1"></a><span class="fu">setSymbolLookup</span>(<span class="at">component.index=</span><span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;399001.sz&quot;</span>, <span class="at">src=</span><span class="st">&quot;yahoo&quot;</span>))</span>
<span id="cb23-13"><a href="data.html#cb23-13" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;component.index&quot;</span>, <span class="at">auto.assign =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-14"><a href="data.html#cb23-14" tabindex="-1"></a><span class="co"># 为三一重工股票设置自定义名称&quot;SANY.HEAVY&quot;</span></span>
<span id="cb23-15"><a href="data.html#cb23-15" tabindex="-1"></a><span class="fu">setSymbolLookup</span>(<span class="at">SANY.HEAVY=</span><span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;600030.ss&quot;</span>, <span class="at">src=</span><span class="st">&quot;yahoo&quot;</span>))</span>
<span id="cb23-16"><a href="data.html#cb23-16" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;SANY.HEAVY&quot;</span>)</span>
<span id="cb23-17"><a href="data.html#cb23-17" tabindex="-1"></a><span class="co"># 查看数据前几行</span></span>
<span id="cb23-18"><a href="data.html#cb23-18" tabindex="-1"></a><span class="fu">head</span>(COMPONENT.INDEX)</span></code></pre></div>
<p>通过上述方法，我们可以更加高效地获取和管理股票交易数据，为后续的金融分析工作打下坚实基础。无论是中国市场还是美国市场的股票数据，都能通过简单的代码实现快速获取和规范命名。</p>
</div>
<div id="股息与拆股数据获取指南" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> 股息与拆股数据获取指南<a href="#%E8%82%A1%E6%81%AF%E4%B8%8E%E6%8B%86%E8%82%A1%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>在量化投资分析中，上市公司的股息分配与拆股行为是影响股票价格连续性的关键因素，准确获取并处理这类数据是确保策略回测与收益计算准确性的基础。</p>
<p>就股息发放而言，其会导致股价产生除息缺口（如每股派息 1 美元，股价理论上应下跌 1
美元），若不进行调整，会使价格序列出现断层，导致收益率计算失真，必须根据派息信息对股价进行调整。</p>
<p>通过 quantmod 包中的 getDividends 函数可直接抓取上市公司历史股息记录，代码如下：</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data.html#cb24-1" tabindex="-1"></a><span class="fu">getDividends</span>(<span class="st">&quot;AAPL&quot;</span>)</span></code></pre></div>
<p>通过 adjustOHLC 函数可对上市公司的股价进行除息调整，调整后 Open/High/Low/Close 价格会基于股息金额向下修正，确保价格序列的连续性。以苹果公司为例：</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data.html#cb25-1" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;AAPL&quot;</span>, <span class="at">from=</span><span class="st">&quot;1990-01-01&quot;</span>, <span class="at">src=</span><span class="st">&quot;yahoo&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;AAPL&quot;</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data.html#cb27-1" tabindex="-1"></a><span class="fu">head</span>(AAPL)</span></code></pre></div>
<pre><code>##            AAPL.Open AAPL.High AAPL.Low
## 1990-01-02    0.3147    0.3348   0.3125
## 1990-01-03    0.3393    0.3393   0.3348
## 1990-01-04    0.3415    0.3460   0.3326
## 1990-01-05    0.3371    0.3415   0.3304
## 1990-01-08    0.3348    0.3393   0.3304
## 1990-01-09    0.3393    0.3393   0.3304
##            AAPL.Close AAPL.Volume
## 1990-01-02     0.3326   183198400
## 1990-01-03     0.3348   207995200
## 1990-01-04     0.3359   221513600
## 1990-01-05     0.3371   123312000
## 1990-01-08     0.3393   101572800
## 1990-01-09     0.3359    86139200
##            AAPL.Adjusted
## 1990-01-02        0.2615
## 1990-01-03        0.2633
## 1990-01-04        0.2641
## 1990-01-05        0.2650
## 1990-01-08        0.2668
## 1990-01-09        0.2641</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data.html#cb29-1" tabindex="-1"></a><span class="fu">head</span>(AAPL.a <span class="ot">&lt;-</span> <span class="fu">adjustOHLC</span>(AAPL))</span></code></pre></div>
<pre><code>##            AAPL.Open AAPL.High  AAPL.Low
## 1990-01-02 4.321e-08 4.597e-08 4.291e-08
## 1990-01-03 4.658e-08 4.658e-08 4.597e-08
## 1990-01-04 4.689e-08 4.750e-08 4.566e-08
## 1990-01-05 4.628e-08 4.689e-08 4.536e-08
## 1990-01-08 4.597e-08 4.658e-08 4.536e-08
## 1990-01-09 4.658e-08 4.658e-08 4.536e-08
##            AAPL.Close AAPL.Volume
## 1990-01-02  4.566e-08   183198400
## 1990-01-03  4.597e-08   207995200
## 1990-01-04  4.612e-08   221513600
## 1990-01-05  4.628e-08   123312000
## 1990-01-08  4.658e-08   101572800
## 1990-01-09  4.612e-08    86139200
##            AAPL.Adjusted
## 1990-01-02        0.2615
## 1990-01-03        0.2633
## 1990-01-04        0.2641
## 1990-01-05        0.2650
## 1990-01-08        0.2668
## 1990-01-09        0.2641</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data.html#cb31-1" tabindex="-1"></a><span class="fu">head</span>(AAPL.uA <span class="ot">&lt;-</span> <span class="fu">adjustOHLC</span>(AAPL, <span class="at">use.Adjusted=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>##            AAPL.Open AAPL.High AAPL.Low
## 1990-01-02    0.2475    0.2633   0.2457
## 1990-01-03    0.2668    0.2668   0.2633
## 1990-01-04    0.2685    0.2720   0.2615
## 1990-01-05    0.2650    0.2685   0.2597
## 1990-01-08    0.2633    0.2668   0.2597
## 1990-01-09    0.2668    0.2668   0.2597
##            AAPL.Close AAPL.Volume
## 1990-01-02     0.2615   183198400
## 1990-01-03     0.2633   207995200
## 1990-01-04     0.2641   221513600
## 1990-01-05     0.2650   123312000
## 1990-01-08     0.2668   101572800
## 1990-01-09     0.2641    86139200
##            AAPL.Adjusted
## 1990-01-02        0.2615
## 1990-01-03        0.2633
## 1990-01-04        0.2641
## 1990-01-05        0.2650
## 1990-01-08        0.2668
## 1990-01-09        0.2641</code></pre>
<p>拆股行为（如 1 拆 2、2 拆 3）会使股价按比例下降（例如 100 美元的股票 1 拆 2 后变为 50 美元），同时股东持股数量相应增加，理论上资产总价值不变。但如果缺乏拆股数据，价格序列会出现 “断崖式下跌”，直接干扰量化分析的准确性：首先，这会误导价格趋势判断， 若某股票拆股后股价从 100 美元降至 50 美元，不结合拆股信息的 K 线分析会误判为 “暴跌”，而实际股东权益并未受损；其次，拆股导致的价格断层会扭曲技术指标计算，移动平均线、波动率、MACD 等依赖历史价格的指标可能产生虚假信号（如非市场波动导致的 “金叉” 或 “死叉”）；此外，拆股数据是复权价格计算的核心基础，缺失拆股比例将无法通过前复权（将历史价格按当前股价调整）或后复权（将当前股价按历史价格调整）还原股票的真实走势。</p>
<p>在量化投资中，准确的价格序列是策略回测、风险评估和收益计算的基石，而 getSplits 函数正是获取上市公司拆股数据的关键工具。通过 getSplits(“AAPL”) 等调用方式，可直接获取标的股票的拆股历史（如拆股日期、拆股比例），这些数据与价格复权算法结合，能有效消除拆股对价格序列的干扰，确保技术分析信号的可靠性与策略回测结果的真实性。</p>
<p>使用 getSplits 函数可以获取上市公司的拆股数据：</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data.html#cb33-1" tabindex="-1"></a><span class="fu">getSplits</span>(<span class="st">&quot;AAPL&quot;</span>)</span></code></pre></div>
<pre><code>##            AAPL.spl
## 1987-06-16   0.5000
## 2000-06-21   0.5000
## 2005-02-28   0.5000
## 2014-06-09   0.1429
## 2020-08-31   0.2500</code></pre>
<p>股息与拆股数据是构建复权价格体系的核心要素。以股息调整为例，若回测某高股息策略时未扣除股息，会导致策略收益率被高估；而拆股数据缺失则会使技术指标（如布林带、RSI）出现断层，影响信号有效性。在实际应用中，这些数据与价格调整共同构成了量化分析的基础 —— 从计算真实的资产回报率（考虑股息再投资）到评估策略在不同市场环境下的表现，再到优化仓位管理与风险控制，每一个环节都依赖于准确的价格序列。因此，通过 getDividends、adjustOHLC 与 getSplits 函数处理数据，本质上是为量化投资构建可靠的 “数据地基”，确保策略从研发到实盘的全流程有效性。</p>
</div>
<div id="期权交易数据获取取指南" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> 期权交易数据获取取指南<a href="#%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E5%8F%96%E6%8C%87%E5%8D%97" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>期权是一种赋予持有者在约定时间内以特定价格买卖标的资产权利的金融工具，兼具风险对冲与投机功能。例如投资者买入苹果股票看跌期权，可在股价下跌时锁定损失；也可通过卖出看涨期权赚取权利金。其杠杆特性还能以小资金博取股价波动收益，同时通过组合策略（如跨式期权）对冲市场不确定性。</p>
<p>这些数据蕴含市场对标的资产的预期，如期权成交量、持仓量激增可能预示股价异动；隐含波动率可反映投资者恐慌或贪婪情绪，是量化策略中定价和风险评估的关键参数。此外，通过分析行权价分布，能判断市场对股价的支撑与压力位，为投资决策提供多维参考。</p>
<p>利用 getOptionChain 函数可以获取上市公司的期权交易数据：</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data.html#cb35-1" tabindex="-1"></a><span class="co"># 获取苹果公司的期权交易数据</span></span>
<span id="cb35-2"><a href="data.html#cb35-2" tabindex="-1"></a>AAPL.OPT <span class="ot">&lt;-</span> <span class="fu">getOptionChain</span>(<span class="st">&quot;AAPL&quot;</span>)</span>
<span id="cb35-3"><a href="data.html#cb35-3" tabindex="-1"></a>AAPL.OPTS <span class="ot">&lt;-</span> <span class="fu">getOptionChain</span>(<span class="st">&quot;AAPL&quot;</span>, <span class="cn">NULL</span>)</span></code></pre></div>
<p>与此相关的还有 options.expiry 函数和 futures.expiry 函数。options.expiry 函数可精准获取期权合约的到期日信息，对交易策略管理意义重大。通过该函数，交易者能清晰知晓期权合约的失效时间，避免因遗忘到期日导致权利金损失，同时可结合到期日分析期权时间价值衰减规律，辅助判断短期投机价值或长期对冲成本。此外，它还能帮助筛选流动性较好的合约月份，提升交易效率。futures.expiry 函数则是期货交易中的重要工具，主要用于获取期货合约的到期或交割日期。借助该函数，交易者可构建连续的期货价格序列，避免合约切换导致的数据断层，同时提前规避交割风险，尤其对不具备实物交割资格的投资者至关重要。另外，它还能为基差分析和套利策略提供支持，助力捕捉市场交易机会。</p>
<p>看一个关于 AAPL 的实例：</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data.html#cb36-1" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;AAPL&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;AAPL&quot;</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data.html#cb38-1" tabindex="-1"></a><span class="fu">options.expiry</span>(AAPL)</span></code></pre></div>
<pre><code>##   [1]   12   32   51   75   95  114  138  158
##   [9]  182  202  222  246  264  283  326  346
##  [17]  370  389  409  433  453  478  497  515
##  [25]  538  558  577  597  621  640  665  684
##  [33]  704  729  748  766  789  809  828  853
##  [41]  872  891  916  935  955  980  999 1022
##  [49] 1042 1061 1081 1105 1124 1143 1168 1187
##  [57] 1212 1232 1251 1273 1293 1312 1336 1356
##  [65] 1375 1399 1419 1443 1463 1481 1505 1523
##  [73] 1542 1561 1585 1605 1629 1648 1668 1692
##  [81] 1712 1732 1756 1774 1797 1817 1856 1880
##  [89] 1899 1919 1943 1963 1988 2007 2025 2048
##  [97] 2068 2087 2107 2131 2150 2175 2194 2214
## [105] 2239 2258 2276 2299 2319 2338 2363 2382
## [113] 2401 2426 2445 2470 2490 2509 2531 2551
## [121] 2570 2594 2614 2633 2657 2677 2696 2721
## [129] 2741 2760 2782 2802 2821 2845 2865 2884
## [137] 2908 2928 2952 2972 2992 3015 3033 3052
## [145] 3071 3115 3139 3158 3178 3202 3222 3242
## [153] 3266 3284 3307 3327 3346 3366 3390 3409
## [161] 3434 3453 3473 3498 3517 3535 3558 3578
## [169] 3597 3622 3641 3660 3685 3704 3724 3749
## [177] 3768 3791 3811 3830 3874 3893 3911 3936
## [185] 3955 3980 4000 4019 4041 4061 4080 4104
## [193] 4124 4143 4166 4186 4205 4230 4250 4269
## [201] 4291 4311 4330 4354 4374 4397 4416 4436
## [209] 4460 4480 4500 4524 4541 4564 4584 4623
## [217] 4646</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="data.html#cb40-1" tabindex="-1"></a><span class="fu">futures.expiry</span>(AAPL)</span></code></pre></div>
<pre><code>##  [1]   51  114  182  246  370  433  497  558
##  [9]  621  684  748  809  872  935  999 1061
## [17] 1124 1187 1251 1312 1375 1443 1505 1561
## [25] 1629 1692 1756 1817 1880 1943 2007 2068
## [33] 2131 2194 2258 2319 2382 2445 2509 2570
## [41] 2633 2696 2760 2821 2884 2952 3015 3071
## [49] 3139 3202 3266 3327 3390 3453 3517 3578
## [57] 3641 3704 3768 3830 3893 3955 4019 4080
## [65] 4143 4205 4269 4330 4397 4460 4524 4584
## [73] 4646</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="data.html#cb42-1" tabindex="-1"></a><span class="fu">print</span>(AAPL[<span class="fu">options.expiry</span>(AAPL)])</span></code></pre></div>
<pre><code>##            AAPL.Open AAPL.High AAPL.Low
## 2007-01-19     3.165     3.202    3.147
## 2007-02-16     3.045     3.050    3.024
## 2007-03-16     3.198     3.214    3.190
## 2007-04-20     3.246     3.256    3.234
## 2007-05-18     3.937     3.951    3.920
## 2007-06-15     4.308     4.310    4.281
## 2007-07-20     5.059     5.149    5.000
## 2007-08-17     4.358     4.411    4.279
## 2007-09-21     5.041     5.166    5.011
## 2007-10-19     6.223     6.237    6.071
##        ...                             
## 2024-08-16   223.920   226.830  223.650
## 2024-09-20   229.970   233.090  227.620
## 2024-10-18   236.180   236.180  234.010
## 2024-11-15   226.400   226.920  224.270
## 2024-12-20   248.040   255.000  245.690
## 2025-01-17   232.120   232.290  228.480
## 2025-02-21   245.950   248.690  245.220
## 2025-03-21   211.560   218.840  211.280
## 2025-05-16   212.360   212.570  209.770
## 2025-06-20   198.240   201.700  196.860
##            AAPL.Close AAPL.Volume
## 2007-01-19      3.161   1.364e+09
## 2007-02-16      3.030   3.999e+08
## 2007-03-16      3.200   5.717e+08
## 2007-04-20      3.249   5.228e+08
## 2007-05-18      3.929   6.213e+08
## 2007-06-15      4.304   8.112e+08
## 2007-07-20      5.134   1.168e+09
## 2007-08-17      4.359   1.195e+09
## 2007-09-21      5.148   1.139e+09
## 2007-10-19      6.086   1.292e+09
##        ...                       
## 2024-08-16    226.050   4.434e+07
## 2024-09-20    228.200   3.187e+08
## 2024-10-18    235.000   4.643e+07
## 2024-11-15    225.000   4.792e+07
## 2024-12-20    254.490   1.475e+08
## 2025-01-17    229.980   6.849e+07
## 2025-02-21    245.550   5.320e+07
## 2025-03-21    218.270   9.413e+07
## 2025-05-16    211.260   5.474e+07
## 2025-06-20    201.000   9.681e+07
##            AAPL.Adjusted
## 2007-01-19         2.660
## 2007-02-16         2.549
## 2007-03-16         2.693
## 2007-04-20         2.734
## 2007-05-18         3.307
## 2007-06-15         3.622
## 2007-07-20         4.320
## 2007-08-17         3.668
## 2007-09-21         4.332
## 2007-10-19         5.122
##        ...              
## 2024-08-16       225.258
## 2024-09-20       227.401
## 2024-10-18       234.177
## 2024-11-15       224.459
## 2024-12-20       253.878
## 2025-01-17       229.427
## 2025-02-21       245.228
## 2025-03-21       217.984
## 2025-05-16       211.260
## 2025-06-20       201.000</code></pre>
</div>
<div id="汇市数据获取指南" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> 汇市数据获取指南<a href="#%E6%B1%87%E5%B8%82%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>getFX 函数可以帮助我们从<a href="http://www.onada.com">oanda</a>获取汇率数据。</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data.html#cb44-1" tabindex="-1"></a><span class="fu">getFX</span>(<span class="st">&quot;USD/JPY&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;USD/JPY&quot;</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data.html#cb46-1" tabindex="-1"></a><span class="fu">head</span>(USDJPY)</span></code></pre></div>
<pre><code>##            USD.JPY
## 2025-01-12   157.7
## 2025-01-13   157.5
## 2025-01-14   157.8
## 2025-01-15   157.0
## 2025-01-16   155.7
## 2025-01-17   155.8</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data.html#cb48-1" tabindex="-1"></a><span class="fu">getFX</span>(<span class="st">&quot;EUR/USD&quot;</span>,<span class="at">from=</span><span class="st">&quot;2005-01-01&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in doTryCatch(return(expr), name,
## parentenv, handler): Oanda only provides
## historical data for the past 180 days.
## Symbol: EUR/USD</code></pre>
<pre><code>## [1] &quot;EUR/USD&quot;</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data.html#cb51-1" tabindex="-1"></a><span class="fu">head</span>(EURUSD)</span></code></pre></div>
<pre><code>##            EUR.USD
## 2025-01-11   1.024
## 2025-01-12   1.024
## 2025-01-13   1.022
## 2025-01-14   1.027
## 2025-01-15   1.030
## 2025-01-16   1.029</code></pre>
<p>也可以使用下面的方式获取汇率数据。</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data.html#cb53-1" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;USD/EUR&quot;</span>,<span class="at">src=</span><span class="st">&quot;oanda&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;USD/EUR&quot;</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="data.html#cb55-1" tabindex="-1"></a><span class="fu">head</span>(USDEUR)</span></code></pre></div>
<pre><code>##            USD.EUR
## 2025-01-12  0.9762
## 2025-01-13  0.9785
## 2025-01-14  0.9738
## 2025-01-15  0.9708
## 2025-01-16  0.9716
## 2025-01-17  0.9717</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="data.html#cb57-1" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;USD/EUR&quot;</span>,<span class="at">src=</span><span class="st">&quot;oanda&quot;</span>,<span class="at">from=</span><span class="st">&quot;2005-01-01&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in doTryCatch(return(expr), name,
## parentenv, handler): Oanda only provides
## historical data for the past 180 days.
## Symbol: USD/EUR</code></pre>
<pre><code>## [1] &quot;USD/EUR&quot;</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="data.html#cb60-1" tabindex="-1"></a><span class="fu">head</span>(USDEUR)</span></code></pre></div>
<pre><code>##            USD.EUR
## 2025-01-11  0.9762
## 2025-01-12  0.9762
## 2025-01-13  0.9785
## 2025-01-14  0.9738
## 2025-01-15  0.9708
## 2025-01-16  0.9716</code></pre>
</div>
<div id="贵重金属数据获取指南" class="section level2 hasAnchor" number="1.6">
<h2><span class="header-section-number">1.6</span> 贵重金属数据获取指南<a href="#%E8%B4%B5%E9%87%8D%E9%87%91%E5%B1%9E%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>getMetals 函数可以获取贵重金属的交易数据。</p>
<div id="黄金价格获取" class="section level3 hasAnchor" number="1.6.1">
<h3><span class="header-section-number">1.6.1</span> 黄金价格获取<a href="#%E9%BB%84%E9%87%91%E4%BB%B7%E6%A0%BC%E8%8E%B7%E5%8F%96" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>黄金通常以”XAU/USD”（黄金兑美元）表示：</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="data.html#cb62-1" tabindex="-1"></a><span class="co"># 方法1：自动赋值（推荐）</span></span>
<span id="cb62-2"><a href="data.html#cb62-2" tabindex="-1"></a><span class="fu">getFX</span>(<span class="st">&quot;XAU/USD&quot;</span>, <span class="at">from =</span> <span class="st">&quot;2005-01-01&quot;</span>, <span class="at">auto.assign =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Warning in doTryCatch(return(expr), name,
## parentenv, handler): Oanda only provides
## historical data for the past 180 days.
## Symbol: XAU/USD</code></pre>
<pre><code>## [1] &quot;XAU/USD&quot;</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="data.html#cb65-1" tabindex="-1"></a><span class="fu">head</span>(XAUUSD)  <span class="co"># 查看黄金数据</span></span></code></pre></div>
<pre><code>##            XAU.USD
## 2025-01-11    2689
## 2025-01-12    2689
## 2025-01-13    2675
## 2025-01-14    2671
## 2025-01-15    2685
## 2025-01-16    2707</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="data.html#cb67-1" tabindex="-1"></a><span class="co"># 方法2：手动赋值</span></span>
<span id="cb67-2"><a href="data.html#cb67-2" tabindex="-1"></a>gold_data <span class="ot">&lt;-</span> <span class="fu">getFX</span>(<span class="st">&quot;XAU/USD&quot;</span>, <span class="at">from =</span> <span class="st">&quot;2005-01-01&quot;</span>, <span class="at">auto.assign =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Warning in doTryCatch(return(expr), name,
## parentenv, handler): Oanda only provides
## historical data for the past 180 days.
## Symbol: XAU/USD</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data.html#cb69-1" tabindex="-1"></a><span class="fu">head</span>(gold_data)</span></code></pre></div>
<pre><code>##            XAU.USD
## 2025-01-11    2689
## 2025-01-12    2689
## 2025-01-13    2675
## 2025-01-14    2671
## 2025-01-15    2685
## 2025-01-16    2707</code></pre>
</div>
<div id="钯金数据获取" class="section level3 hasAnchor" number="1.6.2">
<h3><span class="header-section-number">1.6.2</span> 钯金数据获取<a href="#%E9%92%AF%E9%87%91%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>钯金通常以”XPD/USD”表示：</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="data.html#cb71-1" tabindex="-1"></a><span class="fu">getFX</span>(<span class="st">&quot;XPD/USD&quot;</span>, <span class="at">from =</span> <span class="st">&quot;2005-01-01&quot;</span>, <span class="at">auto.assign =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Warning in doTryCatch(return(expr), name,
## parentenv, handler): Oanda only provides
## historical data for the past 180 days.
## Symbol: XPD/USD</code></pre>
<pre><code>## [1] &quot;XPD/USD&quot;</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="data.html#cb74-1" tabindex="-1"></a><span class="fu">head</span>(XPDUSD)  <span class="co"># 查看钯金数据</span></span></code></pre></div>
<pre><code>##            XPD.USD
## 2025-01-11   962.1
## 2025-01-12   962.1
## 2025-01-13   950.7
## 2025-01-14   946.4
## 2025-01-15   956.7
## 2025-01-16   959.6</code></pre>
</div>
<div id="铂金数据获取" class="section level3 hasAnchor" number="1.6.3">
<h3><span class="header-section-number">1.6.3</span> 铂金数据获取<a href="#%E9%93%82%E9%87%91%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>铂金通常以”XPT/USD”表示：</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="data.html#cb76-1" tabindex="-1"></a><span class="fu">getFX</span>(<span class="st">&quot;XPT/USD&quot;</span>, <span class="at">from =</span> <span class="st">&quot;2005-01-01&quot;</span>, <span class="at">auto.assign =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Warning in doTryCatch(return(expr), name,
## parentenv, handler): Oanda only provides
## historical data for the past 180 days.
## Symbol: XPT/USD</code></pre>
<pre><code>## [1] &quot;XPT/USD&quot;</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="data.html#cb79-1" tabindex="-1"></a><span class="fu">head</span>(XPTUSD)  <span class="co"># 查看铂金数据</span></span></code></pre></div>
<pre><code>##            XPT.USD
## 2025-01-11   978.4
## 2025-01-12   978.4
## 2025-01-13   968.6
## 2025-01-14   948.6
## 2025-01-15   935.0
## 2025-01-16   935.8</code></pre>
</div>
<div id="批量获取多种贵金属数据" class="section level3 hasAnchor" number="1.6.4">
<h3><span class="header-section-number">1.6.4</span> 批量获取多种贵金属数据<a href="#%E6%89%B9%E9%87%8F%E8%8E%B7%E5%8F%96%E5%A4%9A%E7%A7%8D%E8%B4%B5%E9%87%91%E5%B1%9E%E6%95%B0%E6%8D%AE" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>结合 lapply 批量获取多种贵金属数据：</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="data.html#cb81-1" tabindex="-1"></a><span class="co"># 定义需要获取的贵金属代码</span></span>
<span id="cb81-2"><a href="data.html#cb81-2" tabindex="-1"></a>symbols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;XAU/USD&quot;</span>, <span class="st">&quot;XPD/USD&quot;</span>, <span class="st">&quot;XPT/USD&quot;</span>)</span>
<span id="cb81-3"><a href="data.html#cb81-3" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;gold&quot;</span>, <span class="st">&quot;palladium&quot;</span>, <span class="st">&quot;platinum&quot;</span>)</span>
<span id="cb81-4"><a href="data.html#cb81-4" tabindex="-1"></a></span>
<span id="cb81-5"><a href="data.html#cb81-5" tabindex="-1"></a><span class="co"># 批量获取数据并命名</span></span>
<span id="cb81-6"><a href="data.html#cb81-6" tabindex="-1"></a>data_list <span class="ot">&lt;-</span> <span class="fu">lapply</span>(symbols, <span class="cf">function</span>(x) {</span>
<span id="cb81-7"><a href="data.html#cb81-7" tabindex="-1"></a>  <span class="fu">getFX</span>(x, <span class="at">from =</span> <span class="st">&quot;2005-01-01&quot;</span>, <span class="at">auto.assign =</span> <span class="cn">FALSE</span>)</span>
<span id="cb81-8"><a href="data.html#cb81-8" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>## Warning in doTryCatch(return(expr), name,
## parentenv, handler): Oanda only provides
## historical data for the past 180 days.
## Symbol: XAU/USD</code></pre>
<pre><code>## Warning in doTryCatch(return(expr), name,
## parentenv, handler): Oanda only provides
## historical data for the past 180 days.
## Symbol: XPD/USD</code></pre>
<pre><code>## Warning in doTryCatch(return(expr), name,
## parentenv, handler): Oanda only provides
## historical data for the past 180 days.
## Symbol: XPT/USD</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="data.html#cb85-1" tabindex="-1"></a><span class="fu">names</span>(data_list) <span class="ot">&lt;-</span> names</span>
<span id="cb85-2"><a href="data.html#cb85-2" tabindex="-1"></a></span>
<span id="cb85-3"><a href="data.html#cb85-3" tabindex="-1"></a><span class="co"># 访问数据</span></span>
<span id="cb85-4"><a href="data.html#cb85-4" tabindex="-1"></a><span class="fu">head</span>(data_list<span class="sc">$</span>gold)</span></code></pre></div>
<pre><code>##            XAU.USD
## 2025-01-11    2689
## 2025-01-12    2689
## 2025-01-13    2675
## 2025-01-14    2671
## 2025-01-15    2685
## 2025-01-16    2707</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="data.html#cb87-1" tabindex="-1"></a><span class="fu">head</span>(data_list<span class="sc">$</span>palladium)</span></code></pre></div>
<pre><code>##            XPD.USD
## 2025-01-11   962.1
## 2025-01-12   962.1
## 2025-01-13   950.7
## 2025-01-14   946.4
## 2025-01-15   956.7
## 2025-01-16   959.6</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="data.html#cb89-1" tabindex="-1"></a><span class="co"># 检查环境中是否存在对象</span></span>
<span id="cb89-2"><a href="data.html#cb89-2" tabindex="-1"></a><span class="fu">ls</span>()  <span class="co"># 应显示 XAUUSD、XPDUSD、XPTUSD 等对象</span></span></code></pre></div>
<pre><code>##  [1] &quot;600941.SS&quot;            
##  [2] &quot;AAPL&quot;                 
##  [3] &quot;aapl_all_returns&quot;     
##  [4] &quot;aapl_annual_return1&quot;  
##  [5] &quot;aapl_annual_return2&quot;  
##  [6] &quot;aapl_cl&quot;              
##  [7] &quot;aapl_ClCl&quot;            
##  [8] &quot;aapl_daily_return1&quot;   
##  [9] &quot;aapl_daily_return2&quot;   
## [10] &quot;aapl_data&quot;            
## [11] &quot;aapl_features&quot;        
## [12] &quot;aapl_first20&quot;         
## [13] &quot;aapl_first3m&quot;         
## [14] &quot;aapl_future_return&quot;   
## [15] &quot;aapl_HiCl&quot;            
## [16] &quot;aapl_lag1&quot;            
## [17] &quot;aapl_lag5&quot;            
## [18] &quot;aapl_last10&quot;          
## [19] &quot;aapl_last6m&quot;          
## [20] &quot;aapl_LoCl&quot;            
## [21] &quot;aapl_LoHi&quot;            
## [22] &quot;aapl_monthly_return&quot;  
## [23] &quot;aapl_next1&quot;           
## [24] &quot;aapl_OpCl&quot;            
## [25] &quot;aapl_OpHi&quot;            
## [26] &quot;aapl_OpLo&quot;            
## [27] &quot;aapl_OpOp&quot;            
## [28] &quot;aapl_q2&quot;              
## [29] &quot;aapl_quarterly_return&quot;
## [30] &quot;aapl_return&quot;          
## [31] &quot;aapl_weekly_return&quot;   
## [32] &quot;AAPL.a&quot;               
## [33] &quot;AAPL.OPT&quot;             
## [34] &quot;AAPL.OPTS&quot;            
## [35] &quot;AAPL.uA&quot;              
## [36] &quot;allReturns&quot;           
## [37] &quot;BTC-USD&quot;              
## [38] &quot;CHINAMOBILE&quot;          
## [39] &quot;combined_data&quot;        
## [40] &quot;custom_theme&quot;         
## [41] &quot;daily_returns&quot;        
## [42] &quot;dark_theme&quot;           
## [43] &quot;data_list&quot;            
## [44] &quot;end_idx&quot;              
## [45] &quot;end_price&quot;            
## [46] &quot;EURUSD&quot;               
## [47] &quot;event_dates&quot;          
## [48] &quot;event_index&quot;          
## [49] &quot;first20_extended&quot;     
## [50] &quot;gold_data&quot;            
## [51] &quot;has_na&quot;               
## [52] &quot;i&quot;                    
## [53] &quot;intraday_diff&quot;        
## [54] &quot;log_returns&quot;          
## [55] &quot;monthly_AAPL&quot;         
## [56] &quot;monthly_data&quot;         
## [57] &quot;monthly_volatility&quot;   
## [58] &quot;myEnv&quot;                
## [59] &quot;names&quot;                
## [60] &quot;p&quot;                    
## [61] &quot;param_df&quot;             
## [62] &quot;parameters&quot;           
## [63] &quot;price_change&quot;         
## [64] &quot;price_drop&quot;           
## [65] &quot;quarterly_max_volume&quot; 
## [66] &quot;required_packages&quot;    
## [67] &quot;result_df&quot;            
## [68] &quot;returns_df&quot;           
## [69] &quot;returns_long&quot;         
## [70] &quot;returns_merged&quot;       
## [71] &quot;simple_theme&quot;         
## [72] &quot;start_idx&quot;            
## [73] &quot;start_price&quot;          
## [74] &quot;subset_data&quot;          
## [75] &quot;symbols&quot;              
## [76] &quot;USDEUR&quot;               
## [77] &quot;USDJPY&quot;               
## [78] &quot;uses&quot;                 
## [79] &quot;weekly_AAPL&quot;          
## [80] &quot;weekly_data&quot;          
## [81] &quot;weekly_high&quot;          
## [82] &quot;weekly_max_close&quot;     
## [83] &quot;weekly_returns&quot;       
## [84] &quot;XAUUSD&quot;               
## [85] &quot;XPDUSD&quot;               
## [86] &quot;XPTUSD&quot;               
## [87] &quot;year_date&quot;            
## [88] &quot;year_endpoints&quot;       
## [89] &quot;year_returns&quot;         
## [90] &quot;years&quot;</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="data.html#cb91-1" tabindex="-1"></a><span class="co"># 查看数据结构</span></span>
<span id="cb91-2"><a href="data.html#cb91-2" tabindex="-1"></a><span class="fu">str</span>(XAUUSD)  <span class="co"># 应显示时间序列数据结构</span></span></code></pre></div>
<pre><code>## An xts object on 2025-01-11 / 2025-07-09 containing: 
##   Data:    double [180, 1]
##   Columns: XAU.USD
##   Index:   Date [180] (TZ: &quot;UTC&quot;)
##   xts Attributes:
##     $ src    : chr &quot;oanda&quot;
##     $ updated: POSIXct[1:1], format:  ...</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="data.html#cb93-1" tabindex="-1"></a><span class="co"># 绘制价格走势图</span></span>
<span id="cb93-2"><a href="data.html#cb93-2" tabindex="-1"></a><span class="fu">plot</span>(XAUUSD)</span></code></pre></div>
<p><img src="QuantmodHandbook_files/figure-html/vis_xau-1.png" width="90%" /></p>
</div>
</div>
<div id="美联储经济数据获取指南" class="section level2 hasAnchor" number="1.7">
<h2><span class="header-section-number">1.7</span> 美联储经济数据获取指南<a href="#%E7%BE%8E%E8%81%94%E5%82%A8%E7%BB%8F%E6%B5%8E%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>getSymbols.FRED 函数可以获取美联储主页上的美国经济数据。函数基本用法如下：</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="data.html#cb94-1" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&#39;CPIAUCNS&#39;</span>,<span class="at">src=</span><span class="st">&#39;FRED&#39;</span>)</span></code></pre></div>
<p>或者：</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="data.html#cb95-1" tabindex="-1"></a><span class="fu">setSymbolLookup</span>(<span class="at">CPIAUCNS=</span><span class="st">&#39;FRED&#39;</span>)</span>
<span id="cb95-2"><a href="data.html#cb95-2" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&#39;CPIAUCNS&#39;</span>)</span></code></pre></div>
</div>
<div id="数据库数据获取指南" class="section level2 hasAnchor" number="1.8">
<h2><span class="header-section-number">1.8</span> 数据库数据获取指南<a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>[quantmod] (<a href="http://www.quantmod.com)%E4%B9%9F%E6%94%AF%E6%8C%81%E4%BB%8E%E6%9C%AC%E5%9C%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%BB%E5%85%A5%E6%95%B0%E6%8D%AE%E3%80%82%E7%9B%AE%E5%89%8D%EF%BC%8C%E8%83%BD%E6%94%AF%E6%8C%81%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B1%BB%E5%9E%8B%E5%8C%85%E6%8B%AC" class="uri">http://www.quantmod.com)也支持从本地数据库读入数据。目前，能支持的数据库类型包括</a>：</p>
<ul>
<li>MySQL</li>
<li>SQLite</li>
<li>csv</li>
<li>RData</li>
</ul>
<p>对应的函数分别是：</p>
<ul>
<li>getSymbols.MySQL：从 MySQL 数据库读取数据</li>
<li>getSymbols.SQLite：从 SQLite 数据库读取数据</li>
<li>getSymbols.csv：从 csv 文件读取 OHLC 数据</li>
<li>getSymbols.rda：读取以 .r 格式存储的数据</li>
</ul>
</div>
<div id="查看和移除数据" class="section level2 hasAnchor" number="1.9">
<h2><span class="header-section-number">1.9</span> 查看和移除数据<a href="#%E6%9F%A5%E7%9C%8B%E5%92%8C%E7%A7%BB%E9%99%A4%E6%95%B0%E6%8D%AE" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="查看数据" class="section level3 hasAnchor" number="1.9.1">
<h3><span class="header-section-number">1.9.1</span> 查看数据<a href="#%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="data.html#cb96-1" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;AAPL&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;AAPL&quot;</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="data.html#cb98-1" tabindex="-1"></a><span class="fu">showSymbols</span>(<span class="at">env=</span>.GlobalEnv)</span></code></pre></div>
<pre><code>##        AAPL     USD/EUR ChinaMobile 
##     &quot;yahoo&quot;     &quot;oanda&quot;     &quot;yahoo&quot; 
##   600941.SS     BTC-USD     EUR/USD 
##     &quot;yahoo&quot;     &quot;yahoo&quot;     &quot;oanda&quot;</code></pre>
</div>
<div id="移除数据" class="section level3 hasAnchor" number="1.9.2">
<h3><span class="header-section-number">1.9.2</span> 移除数据<a href="#%E7%A7%BB%E9%99%A4%E6%95%B0%E6%8D%AE" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="data.html#cb100-1" tabindex="-1"></a><span class="fu">removeSymbols</span>(<span class="st">&quot;EDU&quot;</span>)</span>
<span id="cb100-2"><a href="data.html#cb100-2" tabindex="-1"></a><span class="fu">showSymbols</span>(<span class="at">env=</span>.GlobalEnv)</span></code></pre></div>
<pre><code>##        AAPL     USD/EUR ChinaMobile 
##     &quot;yahoo&quot;     &quot;oanda&quot;     &quot;yahoo&quot; 
##   600941.SS     BTC-USD     EUR/USD 
##     &quot;yahoo&quot;     &quot;yahoo&quot;     &quot;oanda&quot;</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="data.html#cb102-1" tabindex="-1"></a><span class="fu">getQuote</span>(<span class="st">&quot;AAPL&quot;</span>)</span>
<span id="cb102-2"><a href="data.html#cb102-2" tabindex="-1"></a><span class="fu">getQuote</span>(<span class="st">&quot;QQQQ;SPY;^VXN&quot;</span>,<span class="at">what=</span><span class="fu">yahooQF</span>(<span class="fu">c</span>(<span class="st">&quot;Bid&quot;</span>,<span class="st">&quot;Ask&quot;</span>)))</span>
<span id="cb102-3"><a href="data.html#cb102-3" tabindex="-1"></a><span class="fu">standardQuote</span>()</span>
<span id="cb102-4"><a href="data.html#cb102-4" tabindex="-1"></a><span class="fu">yahooQF</span>()</span></code></pre></div>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="data.html#cb103-1" tabindex="-1"></a><span class="fu">attachSymbols</span>(<span class="st">&quot;MSFT&quot;</span>)</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="author.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="manipulation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": true,
    "facebook": false,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/dengyishuo/quantmod-handbook/01-data.Rmd",
    "text": "编辑"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["QuantmodHandbook.pdf", "QuantmodHandbook.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "none"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
