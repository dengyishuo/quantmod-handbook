<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>第 3 章 图形分析 | quantmod：金融分析手册</title>
  <meta name="description" content="本书全面解析 R 语言 quantmod 包在金融数据分析与交易策略开发中的核心应用。本书从基础数据获取到高级策略回测，通过 200 + 实例代码详解量化全流程，涵盖指标定制、图表可视化、模型构建与绩效评估。附赠策略模板库，助读者快速搭建个性化量化系统，是金融分析师、量化交易者及相关专业学生的必备工具书。" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="第 3 章 图形分析 | quantmod：金融分析手册" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/cover.jpg" />
  <meta property="og:description" content="本书全面解析 R 语言 quantmod 包在金融数据分析与交易策略开发中的核心应用。本书从基础数据获取到高级策略回测，通过 200 + 实例代码详解量化全流程，涵盖指标定制、图表可视化、模型构建与绩效评估。附赠策略模板库，助读者快速搭建个性化量化系统，是金融分析师、量化交易者及相关专业学生的必备工具书。" />
  <meta name="github-repo" content="dengyihsuo/quantmod-handbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="第 3 章 图形分析 | quantmod：金融分析手册" />
  
  <meta name="twitter:description" content="本书全面解析 R 语言 quantmod 包在金融数据分析与交易策略开发中的核心应用。本书从基础数据获取到高级策略回测，通过 200 + 实例代码详解量化全流程，涵盖指标定制、图表可视化、模型构建与绩效评估。附赠策略模板库，助读者快速搭建个性化量化系统，是金融分析师、量化交易者及相关专业学生的必备工具书。" />
  <meta name="twitter:image" content="/images/cover.jpg" />

<meta name="author" content="邓一硕" />


<meta name="date" content="2025-07-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="manipulation.html"/>
<link rel="next" href="TTR.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">quantmod：金融分析手册</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path=""><a href="#%E5%89%8D%E8%A8%80"><i class="fa fa-check"></i>前言</a></li>
<li class="chapter" data-level="" data-path="author.html"><a href="author.html"><i class="fa fa-check"></i>作者简介</a></li>
<li class="chapter" data-level="1" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>1</b> 数据获取指南</a>
<ul>
<li class="chapter" data-level="1.1" data-path="03-graphs.html"><a href="#%E8%82%A1%E7%A5%A8%E6%97%A5%E4%BA%A4%E6%98%93%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97"><i class="fa fa-check"></i><b>1.1</b> 股票日交易数据获取指南</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="03-graphs.html"><a href="#%E4%B8%AD%E5%9B%BD%E5%B8%82%E5%9C%BA%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96"><i class="fa fa-check"></i><b>1.1.1</b> 中国市场数据获取</a></li>
<li class="chapter" data-level="1.1.2" data-path="03-graphs.html"><a href="#%E8%8E%B7%E5%8F%96%E7%BE%8E%E5%9B%BD%E5%B8%82%E5%9C%BA%E6%95%B0%E6%8D%AE"><i class="fa fa-check"></i><b>1.1.2</b> 获取美国市场数据</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="03-graphs.html"><a href="#%E4%BA%A4%E6%98%93%E6%95%B0%E6%8D%AE%E7%9A%84%E7%AE%A1%E7%90%86%E4%B8%8E%E9%87%8D%E5%91%BD%E5%90%8D"><i class="fa fa-check"></i><b>1.2</b> 交易数据的管理与重命名</a></li>
<li class="chapter" data-level="1.3" data-path="03-graphs.html"><a href="#%E8%82%A1%E6%81%AF%E4%B8%8E%E6%8B%86%E8%82%A1%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97"><i class="fa fa-check"></i><b>1.3</b> 股息与拆股数据获取指南</a></li>
<li class="chapter" data-level="1.4" data-path="03-graphs.html"><a href="#%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E5%8F%96%E6%8C%87%E5%8D%97"><i class="fa fa-check"></i><b>1.4</b> 期权交易数据获取取指南</a></li>
<li class="chapter" data-level="1.5" data-path="03-graphs.html"><a href="#%E6%B1%87%E5%B8%82%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97"><i class="fa fa-check"></i><b>1.5</b> 汇市数据获取指南</a></li>
<li class="chapter" data-level="1.6" data-path="03-graphs.html"><a href="#%E8%B4%B5%E9%87%8D%E9%87%91%E5%B1%9E%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97"><i class="fa fa-check"></i><b>1.6</b> 贵重金属数据获取指南</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="03-graphs.html"><a href="#%E9%BB%84%E9%87%91%E4%BB%B7%E6%A0%BC%E8%8E%B7%E5%8F%96"><i class="fa fa-check"></i><b>1.6.1</b> 黄金价格获取</a></li>
<li class="chapter" data-level="1.6.2" data-path="03-graphs.html"><a href="#%E9%92%AF%E9%87%91%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96"><i class="fa fa-check"></i><b>1.6.2</b> 钯金数据获取</a></li>
<li class="chapter" data-level="1.6.3" data-path="03-graphs.html"><a href="#%E9%93%82%E9%87%91%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96"><i class="fa fa-check"></i><b>1.6.3</b> 铂金数据获取</a></li>
<li class="chapter" data-level="1.6.4" data-path="03-graphs.html"><a href="#%E6%89%B9%E9%87%8F%E8%8E%B7%E5%8F%96%E5%A4%9A%E7%A7%8D%E8%B4%B5%E9%87%91%E5%B1%9E%E6%95%B0%E6%8D%AE"><i class="fa fa-check"></i><b>1.6.4</b> 批量获取多种贵金属数据</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="03-graphs.html"><a href="#%E7%BE%8E%E8%81%94%E5%82%A8%E7%BB%8F%E6%B5%8E%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97"><i class="fa fa-check"></i><b>1.7</b> 美联储经济数据获取指南</a></li>
<li class="chapter" data-level="1.8" data-path="03-graphs.html"><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%8C%87%E5%8D%97"><i class="fa fa-check"></i><b>1.8</b> 数据库数据获取指南</a></li>
<li class="chapter" data-level="1.9" data-path="03-graphs.html"><a href="#%E6%9F%A5%E7%9C%8B%E5%92%8C%E7%A7%BB%E9%99%A4%E6%95%B0%E6%8D%AE"><i class="fa fa-check"></i><b>1.9</b> 查看和移除数据</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="03-graphs.html"><a href="#%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE"><i class="fa fa-check"></i><b>1.9.1</b> 查看数据</a></li>
<li class="chapter" data-level="1.9.2" data-path="03-graphs.html"><a href="#%E7%A7%BB%E9%99%A4%E6%95%B0%E6%8D%AE"><i class="fa fa-check"></i><b>1.9.2</b> 移除数据</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="manipulation.html"><a href="manipulation.html"><i class="fa fa-check"></i><b>2</b> 基本数据操作</a>
<ul>
<li class="chapter" data-level="2.1" data-path="03-graphs.html"><a href="#%E9%AA%8C%E8%AF%81%E6%95%B0%E6%8D%AE%E7%9A%84%E5%87%BD%E6%95%B0"><i class="fa fa-check"></i><b>2.1</b> 验证数据的函数</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="03-graphs.html"><a href="#%E9%AA%8C%E8%AF%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><i class="fa fa-check"></i><b>2.1.1</b> 验证数据类型</a></li>
<li class="chapter" data-level="2.1.2" data-path="03-graphs.html"><a href="#%E9%AA%8C%E8%AF%81%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7"><i class="fa fa-check"></i><b>2.1.2</b> 验证数据完整性</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="03-graphs.html"><a href="#%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE"><i class="fa fa-check"></i><b>2.2</b> 提取数据</a></li>
<li class="chapter" data-level="2.3" data-path="03-graphs.html"><a href="#%E6%95%B0%E6%8D%AE%E7%9A%84%E7%AE%80%E5%8D%95%E8%AE%A1%E7%AE%97"><i class="fa fa-check"></i><b>2.3</b> 数据的简单计算</a></li>
<li class="chapter" data-level="2.4" data-path="03-graphs.html"><a href="#%E5%BA%8F%E5%88%97%E8%AE%A1%E7%AE%97%E5%87%BD%E6%95%B0"><i class="fa fa-check"></i><b>2.4</b> 序列计算函数</a></li>
<li class="chapter" data-level="2.5" data-path="03-graphs.html"><a href="#%E8%AE%A1%E7%AE%97%E6%94%B6%E7%9B%8A%E7%8E%87"><i class="fa fa-check"></i><b>2.5</b> 计算收益率</a></li>
<li class="chapter" data-level="2.6" data-path="03-graphs.html"><a href="#%E5%BA%8F%E5%88%97%E7%9A%84%E6%BB%9E%E5%90%8E%E5%89%8D%E7%A7%BB%E4%B8%8E%E9%80%89%E5%8F%96"><i class="fa fa-check"></i><b>2.6</b> 序列的滞后/前移与选取</a></li>
<li class="chapter" data-level="2.7" data-path="03-graphs.html"><a href="#%E8%AE%A1%E7%AE%97%E5%B3%B0%E5%80%BC%E5%B3%B0%E8%B0%B7"><i class="fa fa-check"></i><b>2.7</b> 计算峰值/峰谷</a></li>
<li class="chapter" data-level="2.8" data-path="03-graphs.html"><a href="#%E8%AE%A1%E7%AE%97%E6%9E%81%E5%80%BC"><i class="fa fa-check"></i><b>2.8</b> 计算极值</a></li>
<li class="chapter" data-level="2.9" data-path="03-graphs.html"><a href="#%E5%B7%AE%E5%88%86%E9%98%88%E5%80%BC%E5%87%BD%E6%95%B0"><i class="fa fa-check"></i><b>2.9</b> 差分/阈值函数</a></li>
<li class="chapter" data-level="2.10" data-path="03-graphs.html"><a href="#%E6%97%A5%E6%9C%9F%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0"><i class="fa fa-check"></i><b>2.10</b> 日期转换函数</a>
<ul>
<li class="chapter" data-level="2.10.1" data-path="03-graphs.html"><a href="#%E6%97%A5%E5%91%A8%E8%BD%AC%E6%8D%A2%E5%8F%8A%E6%97%A5%E6%9C%88%E8%BD%AC%E6%8D%A2"><i class="fa fa-check"></i><b>2.10.1</b> 日/周转换及日/月转换</a></li>
<li class="chapter" data-level="2.10.2" data-path="03-graphs.html"><a href="#%E6%95%B0%E6%8D%AE%E5%91%A8%E6%9C%9F%E7%9A%84%E6%99%BA%E8%83%BD%E8%AF%86%E5%88%AB"><i class="fa fa-check"></i><b>2.10.2</b> 数据周期的智能识别</a></li>
<li class="chapter" data-level="2.10.3" data-path="03-graphs.html"><a href="#%E5%91%A8%E6%9C%9F%E7%89%B9%E5%BE%81%E8%AE%A1%E7%AE%97"><i class="fa fa-check"></i><b>2.10.3</b> 周期特征计算</a></li>
<li class="chapter" data-level="2.10.4" data-path="03-graphs.html"><a href="#%E8%AE%A1%E7%AE%97%E5%91%A8%E6%9C%9F%E6%9C%80%E5%A4%A7%E5%80%BC"><i class="fa fa-check"></i><b>2.10.4</b> 计算周期最大值</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="graphs.html"><a href="graphs.html"><i class="fa fa-check"></i><b>3</b> 图形分析</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03-graphs.html"><a href="#%E5%9F%BA%E6%9C%AC%E7%BB%98%E5%9B%BE%E5%87%BD%E6%95%B0"><i class="fa fa-check"></i><b>3.1</b> 基本绘图函数</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="03-graphs.html"><a href="#%E5%85%A8%E8%83%BD%E7%BB%98%E5%9B%BE%E5%BC%95%E6%93%8E-chartseries"><i class="fa fa-check"></i><b>3.1.1</b> 全能绘图引擎 chartSeries</a></li>
<li class="chapter" data-level="3.1.2" data-path="03-graphs.html"><a href="#%E5%8A%A8%E6%80%81%E6%9B%B4%E6%96%B0%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7-rechart"><i class="fa fa-check"></i><b>3.1.2</b> 动态更新的可视化效率工具 reChart</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="03-graphs.html"><a href="#%E4%B8%89%E7%A7%8D%E5%9F%BA%E6%9C%AC%E5%9B%BE%E5%BD%A2"><i class="fa fa-check"></i><b>3.2</b> 三种基本图形</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="03-graphs.html"><a href="#%E6%9D%A1%E5%BD%A2%E5%9B%BE"><i class="fa fa-check"></i><b>3.2.1</b> 条形图</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-graphs.html"><a href="#%E8%9C%A1%E7%83%9B%E5%9B%BE"><i class="fa fa-check"></i><b>3.2.2</b> 蜡烛图</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-graphs.html"><a href="#%E7%BA%BF%E5%9B%BE"><i class="fa fa-check"></i><b>3.2.3</b> 线图</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="03-graphs.html"><a href="#%E5%9B%BE%E5%BD%A2%E4%B8%BB%E9%A2%98%E5%AE%9A%E5%88%B6"><i class="fa fa-check"></i><b>3.3</b> 图形主题定制</a></li>
<li class="chapter" data-level="3.4" data-path="03-graphs.html"><a href="#%E5%9B%BE%E5%BD%A2%E7%BC%A9%E6%94%BE"><i class="fa fa-check"></i><b>3.4</b> 图形缩放</a></li>
<li class="chapter" data-level="3.5" data-path="03-graphs.html"><a href="#%E5%9B%BE%E5%BD%A2%E5%AD%98%E5%82%A8"><i class="fa fa-check"></i><b>3.5</b> 图形存储</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="TTR.html"><a href="TTR.html"><i class="fa fa-check"></i><b>4</b> 技术分析图</a>
<ul>
<li class="chapter" data-level="4.1" data-path="03-graphs.html"><a href="#%E8%B6%8B%E5%8A%BF%E7%B1%BB%E6%8C%87%E6%A0%87%E5%9B%BE"><i class="fa fa-check"></i><b>4.1</b> 趋势类指标图</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="03-graphs.html"><a href="#%E6%8A%9B%E7%89%A9%E7%BA%BF%E6%8C%87%E6%A0%87-sar%E8%B6%8B%E5%8A%BF%E8%B7%9F%E8%B8%AA%E4%B8%8E%E6%AD%A2%E6%8D%9F%E7%AD%96%E7%95%A5%E7%9A%84%E5%8A%A8%E6%80%81%E5%B9%B3%E8%A1%A1%E5%99%A8"><i class="fa fa-check"></i><b>4.1.1</b> 抛物线指标 SAR：趋势跟踪与止损策略的动态平衡器</a></li>
<li class="chapter" data-level="4.1.2" data-path="03-graphs.html"><a href="#%E5%B9%B3%E5%9D%87%E8%B6%8B%E5%90%91%E6%8C%87%E6%A0%87-adx%E8%B6%8B%E5%8A%BF%E5%BC%BA%E5%BA%A6%E7%9A%84%E7%B2%BE%E7%A1%AE%E5%BA%A6%E9%87%8F%E4%B8%8E%E4%BA%A4%E6%98%93%E6%97%B6%E6%9C%BA%E8%BF%87%E6%BB%A4%E5%99%A8"><i class="fa fa-check"></i><b>4.1.2</b> 平均趋向指标 ADX：趋势强度的精确度量与交易时机过滤器</a></li>
<li class="chapter" data-level="4.1.3" data-path="03-graphs.html"><a href="#%E7%AE%80%E5%8D%95%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E7%BA%BF-sma%E8%B6%8B%E5%8A%BF%E8%AF%86%E5%88%AB%E4%B8%8E%E5%8A%A8%E6%80%81%E6%94%AF%E6%92%91%E9%98%BB%E5%8A%9B%E7%9A%84%E5%9F%BA%E7%9F%B3"><i class="fa fa-check"></i><b>4.1.3</b> 简单移动平均线 SMA：趋势识别与动态支撑阻力的基石</a></li>
<li class="chapter" data-level="4.1.4" data-path="03-graphs.html"><a href="#%E6%8C%87%E6%95%B0%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E7%BA%BF-ema%E4%BB%B7%E6%A0%BC%E5%8A%A8%E9%87%8F%E7%9A%84%E7%81%B5%E6%95%8F%E6%8D%95%E6%8D%89%E5%99%A8%E4%B8%8E%E8%B6%8B%E5%8A%BF%E6%8B%90%E7%82%B9%E5%85%88%E8%A1%8C%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.1.4</b> 指数移动平均线 EMA：价格动量的灵敏捕捉器与趋势拐点先行指标</a></li>
<li class="chapter" data-level="4.1.5" data-path="03-graphs.html"><a href="#%E5%8F%8C%E6%8C%87%E6%95%B0%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E7%BA%BF-dema%E6%B6%88%E9%99%A4%E6%BB%9E%E5%90%8E%E7%9A%84%E8%B6%8B%E5%8A%BF%E5%8A%A0%E9%80%9F%E5%BC%95%E6%93%8E%E4%B8%8E%E6%8B%90%E7%82%B9%E7%A1%AE%E8%AE%A4%E5%88%A9%E5%99%A8"><i class="fa fa-check"></i><b>4.1.5</b> 双指数移动平均线 DEMA：消除滞后的趋势加速引擎与拐点确认利器</a></li>
<li class="chapter" data-level="4.1.6" data-path="03-graphs.html"><a href="#%E5%8A%A0%E6%9D%83%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E7%BA%BF-wma%E7%B2%BE%E7%BB%86%E4%BB%B7%E6%A0%BC%E6%9D%83%E9%87%8D%E5%88%86%E9%85%8D%E7%9A%84%E8%B6%8B%E5%8A%BF%E5%BA%A6%E9%87%8F%E8%A1%A1%E4%B8%8E%E7%9F%AD%E6%9C%9F%E6%B3%A2%E5%8A%A8%E8%BF%87%E6%BB%A4%E5%99%A8"><i class="fa fa-check"></i><b>4.1.6</b> 加权移动平均线 WMA：精细价格权重分配的趋势度量衡与短期波动过滤器</a></li>
<li class="chapter" data-level="4.1.7" data-path="03-graphs.html"><a href="#%E9%9B%B6%E6%BB%9E%E5%90%8E%E6%8C%87%E6%95%B0%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E7%BA%BF-zlema%E6%B6%88%E9%99%A4%E8%B6%8B%E5%8A%BF%E6%BB%9E%E5%90%8E%E7%9A%84%E7%9F%AD%E7%BA%BF%E4%BA%A4%E6%98%93%E5%88%A9%E5%99%A8"><i class="fa fa-check"></i><b>4.1.7</b> 零滞后指数移动平均线 ZLEMA：消除趋势滞后的短线交易利器</a></li>
<li class="chapter" data-level="4.1.8" data-path="03-graphs.html"><a href="#%E5%BC%B9%E6%80%A7%E6%88%90%E4%BA%A4%E9%87%8F%E5%8A%A0%E6%9D%83%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E7%BA%BF-evwma%E9%87%8F%E4%BB%B7%E7%BB%93%E5%90%88%E7%9A%84%E8%B6%8B%E5%8A%BF%E7%A1%AE%E8%AE%A4%E5%88%A9%E5%99%A8"><i class="fa fa-check"></i><b>4.1.8</b> 弹性成交量加权移动平均线 EVWMA：量价结合的趋势确认利器</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="03-graphs.html"><a href="#%E9%9C%87%E8%8D%A1%E7%B1%BB%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.2</b> 震荡类指标</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="03-graphs.html"><a href="#%E7%9B%B8%E5%AF%B9%E5%BC%BA%E5%BC%B1%E6%8C%87%E6%A0%87-rsi%E5%B8%82%E5%9C%BA%E5%8A%A8%E9%87%8F%E7%9A%84%E5%9D%87%E8%A1%A1%E5%A4%A9%E5%B9%B3"><i class="fa fa-check"></i><b>4.2.1</b> 相对强弱指标 RSI：市场动量的均衡天平</a></li>
<li class="chapter" data-level="4.2.2" data-path="03-graphs.html"><a href="#%E9%9A%8F%E6%9C%BA%E6%8C%87%E6%A0%87-kdj%E4%BB%B7%E6%A0%BC%E5%8A%A8%E9%87%8F%E7%9A%84%E7%B2%BE%E5%87%86%E5%BA%A6%E9%87%8F%E8%A1%A1"><i class="fa fa-check"></i><b>4.2.2</b> 随机指标 KDJ：价格动量的精准度量衡</a></li>
<li class="chapter" data-level="4.2.3" data-path="03-graphs.html"><a href="#%E5%A8%81%E5%BB%89%E6%8C%87%E6%A0%87-wpr%E5%8F%8D%E5%90%91%E8%A7%86%E8%A7%92%E4%B8%8B%E7%9A%84%E8%B6%85%E4%B9%B0%E8%B6%85%E5%8D%96%E6%8E%A2%E6%B5%8B%E5%99%A8"><i class="fa fa-check"></i><b>4.2.3</b> 威廉指标 WPR：反向视角下的超买超卖探测器</a></li>
<li class="chapter" data-level="4.2.4" data-path="03-graphs.html"><a href="#chande-%E5%8A%A8%E9%87%8F%E6%91%86%E5%8A%A8%E6%8C%87%E6%A0%87-cmo%E4%BB%B7%E6%A0%BC%E5%8A%A8%E8%83%BD%E7%9A%84%E7%B2%BE%E7%A1%AE%E6%B5%8B%E9%87%8F%E4%BB%AA"><i class="fa fa-check"></i><b>4.2.4</b> Chande 动量摆动指标 CMO：价格动能的精确测量仪</a></li>
<li class="chapter" data-level="4.2.5" data-path="03-graphs.html"><a href="#%E9%9A%8F%E6%9C%BA%E5%8A%A8%E9%87%8F%E6%8C%87%E6%A0%87-smi%E7%B2%BE%E5%87%86%E8%BF%87%E6%BB%A4%E5%99%AA%E9%9F%B3%E7%9A%84%E8%B6%8B%E5%8A%BF%E5%8F%8D%E8%BD%AC%E6%8E%A2%E6%B5%8B%E5%99%A8"><i class="fa fa-check"></i><b>4.2.5</b> 随机动量指标 SMI：精准过滤噪音的趋势反转探测器</a></li>
<li class="chapter" data-level="4.2.6" data-path="03-graphs.html"><a href="#%E4%BB%B7%E6%A0%BC%E5%8F%98%E5%8A%A8%E7%8E%87%E6%8C%87%E6%A0%87-roc%E5%B8%82%E5%9C%BA%E5%8A%A8%E8%83%BD%E7%9A%84%E6%B5%8B%E9%80%9F%E4%BB%AA"><i class="fa fa-check"></i><b>4.2.6</b> 价格变动率指标 ROC：市场动能的测速仪</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="03-graphs.html"><a href="#%E6%B3%A2%E5%8A%A8%E7%8E%87%E7%B1%BB%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.3</b> 波动率类指标</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="03-graphs.html"><a href="#%E5%B8%83%E6%9E%97%E5%B8%A6-bbands%E5%B8%82%E5%9C%BA%E6%B3%A2%E5%8A%A8%E7%9A%84%E5%8A%A8%E6%80%81%E6%A0%87%E5%B0%BA"><i class="fa fa-check"></i><b>4.3.1</b> 布林带 BBands：市场波动的动态标尺</a></li>
<li class="chapter" data-level="4.3.2" data-path="03-graphs.html"><a href="#%E5%8C%85%E7%BB%9C%E7%BA%BF-envelope%E4%BB%B7%E6%A0%BC%E6%B3%A2%E5%8A%A8%E7%9A%84%E5%9B%BA%E5%AE%9A%E5%8C%BA%E9%97%B4%E6%A0%87%E5%B0%BA"><i class="fa fa-check"></i><b>4.3.2</b> 包络线 Envelope：价格波动的固定区间标尺</a></li>
<li class="chapter" data-level="4.3.3" data-path="03-graphs.html"><a href="#%E5%B9%B3%E5%9D%87%E7%9C%9F%E5%AE%9E%E6%B3%A2%E5%B9%85-atr%E5%B8%82%E5%9C%BA%E6%B3%A2%E5%8A%A8%E6%80%A7%E7%9A%84%E7%B2%BE%E5%87%86%E5%BA%A6%E9%87%8F"><i class="fa fa-check"></i><b>4.3.3</b> 平均真实波幅 ATR：市场波动性的精准度量</a></li>
<li class="chapter" data-level="4.3.4" data-path="03-graphs.html"><a href="#%E5%8C%BA%E9%97%B4%E9%9C%87%E8%8D%A1%E7%BA%BF-dpo%E4%BB%B7%E6%A0%BC%E5%91%A8%E6%9C%9F%E4%B8%8E%E8%B6%85%E4%B9%B0%E8%B6%85%E5%8D%96%E7%9A%84%E7%B2%BE%E5%87%86%E5%BA%A6%E9%87%8F"><i class="fa fa-check"></i><b>4.3.4</b> 区间震荡线 DPO：价格周期与超买超卖的精准度量</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="03-graphs.html"><a href="#%E6%88%90%E4%BA%A4%E9%87%8F%E7%B1%BB%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.4</b> 成交量类指标</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="03-graphs.html"><a href="#%E6%88%90%E4%BA%A4%E9%87%8F%E6%8C%87%E6%A0%87-vo%E5%B8%82%E5%9C%BA%E5%8A%A8%E8%83%BD%E4%B8%8E%E8%B6%8B%E5%8A%BF%E7%A1%AE%E8%AE%A4%E7%9A%84%E6%A0%B8%E5%BF%83%E5%B7%A5%E5%85%B7"><i class="fa fa-check"></i><b>4.4.1</b> 成交量指标 Vo：市场动能与趋势确认的核心工具</a></li>
<li class="chapter" data-level="4.4.2" data-path="03-graphs.html"><a href="#chaikin-%E8%B5%84%E9%87%91%E6%B5%81%E9%87%8F-cmf%E9%87%8F%E4%BB%B7%E7%BB%93%E5%90%88%E7%9A%84%E8%B5%84%E9%87%91%E5%8A%A8%E8%83%BD%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.4.2</b> Chaikin 资金流量 CMF：量价结合的资金动能指标</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="03-graphs.html"><a href="#%E7%89%B9%E6%AE%8A%E6%8A%80%E6%9C%AF%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.5</b> 特殊技术指标</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="03-graphs.html"><a href="#%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E6%94%B6%E6%95%9B%E5%8F%91%E6%95%A3%E6%8C%87%E6%A0%87-macd%E8%B6%8B%E5%8A%BF%E4%B8%8E%E5%8A%A8%E9%87%8F%E7%9A%84%E5%8F%8C%E9%87%8D%E5%BA%A6%E9%87%8F"><i class="fa fa-check"></i><b>4.5.1</b> 移动平均收敛发散指标 MACD：趋势与动量的双重度量</a></li>
<li class="chapter" data-level="4.5.2" data-path="03-graphs.html"><a href="#%E5%8A%A8%E9%87%8F%E6%8C%87%E6%A0%87-momentum%E4%BB%B7%E6%A0%BC%E5%8F%98%E5%8A%A8%E9%80%9F%E5%BA%A6%E7%9A%84%E7%B2%BE%E5%87%86%E5%BA%A6%E9%87%8F"><i class="fa fa-check"></i><b>4.5.2</b> 动量指标 Momentum：价格变动速度的精准度量</a></li>
<li class="chapter" data-level="4.5.3" data-path="03-graphs.html"><a href="#%E9%A1%BA%E5%8A%BF%E6%8C%87%E6%A0%87-cci%E4%BB%B7%E6%A0%BC%E5%81%8F%E7%A6%BB%E5%BA%A6%E4%B8%8E%E8%B6%8B%E5%8A%BF%E5%8F%8D%E8%BD%AC%E7%9A%84%E5%8A%A8%E6%80%81%E7%9B%91%E6%B5%8B"><i class="fa fa-check"></i><b>4.5.3</b> 顺势指标 CCI：价格偏离度与趋势反转的动态监测</a></li>
<li class="chapter" data-level="4.5.4" data-path="03-graphs.html"><a href="#%E5%90%88%E7%BA%A6%E7%BB%88%E6%AD%A2%E7%BA%BF-expiry%E6%9C%9F%E8%B4%A7%E5%B8%82%E5%9C%BA%E6%97%B6%E9%97%B4%E7%BB%B4%E5%BA%A6%E7%9A%84%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><i class="fa fa-check"></i><b>4.5.4</b> 合约终止线 Expiry：期货市场时间维度的风险管理工具</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="03-graphs.html"><a href="#%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0quantmod-%E5%8C%85%E7%9A%84%E6%8C%87%E6%A0%87%E5%AE%9A%E5%88%B6%E4%B8%8E%E5%9B%BE%E8%A1%A8%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><i class="fa fa-check"></i><b>4.6</b> 辅助函数：quantmod 包的指标定制与图表管理工具</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="03-graphs.html"><a href="#%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E7%BB%98%E5%9B%BE%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.6.1</b> 设置默认绘图指标</a></li>
<li class="chapter" data-level="4.6.2" data-path="03-graphs.html"><a href="#%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.6.2</b> 添加自定义指标</a></li>
<li class="chapter" data-level="4.6.3" data-path="03-graphs.html"><a href="#%E5%88%9B%E5%BB%BA%E6%96%B0%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.6.3</b> 创建新指标</a></li>
<li class="chapter" data-level="4.6.4" data-path="03-graphs.html"><a href="#%E6%9F%A5%E7%9C%8B%E5%B7%B2%E6%B7%BB%E5%8A%A0%E7%9A%84%E6%8C%87%E6%A0%87"><i class="fa fa-check"></i><b>4.6.4</b> 查看已添加的指标</a></li>
<li class="chapter" data-level="4.6.5" data-path="03-graphs.html"><a href="#%E6%9E%84%E5%BB%BA%E7%BB%BC%E5%90%88%E5%88%86%E6%9E%90%E5%9B%BE%E8%A1%A8"><i class="fa fa-check"></i><b>4.6.5</b> 构建综合分析图表</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="model.html"><a href="model.html"><i class="fa fa-check"></i><b>5</b> 量化建模与回测：从模型设定到策略验证</a>
<ul>
<li class="chapter" data-level="5.1" data-path="03-graphs.html"><a href="#%E6%A8%A1%E5%9E%8B%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B"><i class="fa fa-check"></i><b>5.1</b> 模型构建流程</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="03-graphs.html"><a href="#%E8%AE%BE%E5%AE%9A%E6%A8%A1%E5%9E%8B%E5%BD%A2%E5%BC%8F"><i class="fa fa-check"></i><b>5.1.1</b> 设定模型形式</a></li>
<li class="chapter" data-level="5.1.2" data-path="03-graphs.html"><a href="#%E6%9F%A5%E7%9C%8B%E6%A8%A1%E5%9E%8B%E6%95%B0%E6%8D%AE"><i class="fa fa-check"></i><b>5.1.2</b> 查看模型数据</a></li>
<li class="chapter" data-level="5.1.3" data-path="03-graphs.html"><a href="#%E4%BC%B0%E8%AE%A1%E6%A8%A1%E5%9E%8B%E5%8F%82%E6%95%B0"><i class="fa fa-check"></i><b>5.1.3</b> 估计模型参数</a></li>
<li class="chapter" data-level="5.1.4" data-path="03-graphs.html"><a href="#%E6%A8%A1%E5%9E%8B%E7%BB%93%E6%9E%9C%E6%8F%90%E5%8F%96"><i class="fa fa-check"></i><b>5.1.4</b> 模型结果提取</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="03-graphs.html"><a href="#%E7%AD%96%E7%95%A5%E5%9B%9E%E6%B5%8B%E4%B8%8E%E8%AF%84%E4%BC%B0"><i class="fa fa-check"></i><b>5.2</b> 策略回测与评估</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i>结语</a></li>
<li class="appendix"><span><b>附录</b></span></li>
<li class="chapter" data-level="A" data-path="quantbooks.html"><a href="quantbooks.html"><i class="fa fa-check"></i><b>A</b> R 量化投资系列书籍</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>参考文献</a></li>
<li class="divider"></li>
<li><a href="https://gewutang.org" target="blank">本书由邓一硕出品</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">quantmod：金融分析手册</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="graphs" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">第 3 章</span> 图形分析<a href="graphs.html#graphs" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>在金融市场的量化分析与可视化展示中，R 语言的 quantmod 提供了一套强大且灵活的图形分析工具，帮助投资者和分析师直观地理解金融时间序列数据及其技术指标特征。</p>
<div id="基本绘图函数" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> 基本绘图函数<a href="#%E5%9F%BA%E6%9C%AC%E7%BB%98%E5%9B%BE%E5%87%BD%E6%95%B0" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="全能绘图引擎-chartseries" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> 全能绘图引擎 chartSeries<a href="#%E5%85%A8%E8%83%BD%E7%BB%98%E5%9B%BE%E5%BC%95%E6%93%8E-chartseries" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>chartSeries 作为 quantmod 包的核心绘图函数，构建了从价格数据到分析图表的完整可视化链路。该函数以 xts 格式的时间序列数据为输入（如通过 getSymbols 获取的 OHLCV 数据），通过参数组合实现多维度的图表呈现：当 type 参数设置为 “candlestick” 时，可生成技术分析常用的蜡烛图，直观展示开盘价、收盘价、最高价与最低价的日内波动；若切换为 “line”，则以收盘价连线呈现趋势走向。其 TA 参数支持动态叠加技术指标，例如添加 50 日简单移动平均线（addSMA (n=50)）或布林带（addBBands ()），使图表兼具数据可视化与信号分析功能。
在图形细节优化方面，pars 参数可精细调整视觉元素：通过 up.col=“green” 与 dn.col=“red” 区分蜡烛图的涨跌颜色，设置 volume=TRUE 可在主图下方同步显示成交量柱形图。而 theme 参数预设了多种专业风格 —— 选用 “economist” 可生成《经济学人》式的简约图表，“wsj” 则适配《华尔街日报》的排版规范，大幅减少手动美化的工作量。例如绘制苹果公司股票的蜡烛图时，只需调用 chartSeries (AAPL, type=“candlestick”, theme=“white”)，即可快速生成白底黑字的专业图表，再通过 addRSI () 叠加相对强弱指标，实现 “一图多析” 的高效分析。</p>
</div>
<div id="动态更新的可视化效率工具-rechart" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> 动态更新的可视化效率工具 reChart<a href="#%E5%8A%A8%E6%80%81%E6%9B%B4%E6%96%B0%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7-rechart" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>reChart 函数解决了传统绘图中 “参数修改需重绘全图” 的痛点，支持在已有图表基础上动态调整配置。当需要将已生成的蜡烛图转换为线图时，无需重新加载数据，直接通过<code>reChart (type="line")</code> 即可完成样式切换；若要追加技术指标，可调用 <code>reChart (TA="addMACD ()")</code> 在原图中叠加 MACD 柱状图。这种 “一次绘图，多次迭代” 的模式，在处理十年期以上的长周期数据时优势显著 —— 首次绘图后缓存计算结果，后续修改仅更新视觉层参数，可减少 70% 的内存占用与渲染时间。</p>
<p>实际应用中，reChart 常用于多方案对比分析：先通过 chartSeries 绘制基础图表并添加 50 日移动平均线，再通过 reChart 分别追加布林带与 RSI 指标，观察不同指标组合的信号差异；在制作报告时，可先以 “black” 主题生成深色图表进行内部分析，再通过 reChart (theme=“white”) 切换为适合打印的浅色主题，避免重复处理数据。这种动态更新机制，使量化分析师能够将更多精力投入指标有效性验证，而非重复的图表调整工作，尤其适合需要频繁迭代的策略研发场景。</p>
<p>chartSeries 与 reChart 的组合使用，形成了从数据展示到深度分析的完整链路：首先通过 chartSeries 设置图表基础样式（如 OHLC 柱形图 + 成交量），然后利用 reChart 逐步叠加技术指标，观察价格与指标的共振信号；在策略回测阶段，可先用 chartSeries 绘制收益率曲线，再通过 reChart 添加最大回撤标记与夏普比率注释，使图表直接呈现策略绩效。这种可视化逻辑不仅适用于单资产分析，在多资产对比中更能体现优势 —— 例如同时绘制标普 500 与黄金 ETF 的蜡烛图，通过 reChart 统一调整时间周期与指标参数，快速识别资产联动性与背离信号，为资产配置决策提供直观支持。</p>
</div>
</div>
<div id="三种基本图形" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> 三种基本图形<a href="#%E4%B8%89%E7%A7%8D%E5%9F%BA%E6%9C%AC%E5%9B%BE%E5%BD%A2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>在基本图形绘制方面，barChart 、candleChart 和lineChart 函数分别用于生成条形图、蜡烛图和线图。</p>
<p>以苹果公司（AAPL）股票数据为例，barChart(AAPL)可绘制其价格走势的条形图，添加theme=“white”参数则能切换为简洁的白色主题；candleChart(AAPL)用于绘制蜡烛图，通过multi.col=T参数开启多色模式，更清晰地区分涨跌情况。线图则适用于展示价格变化趋势，lineChart(AAPL)能直观呈现数据的连续波动。</p>
<div id="条形图" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> 条形图<a href="#%E6%9D%A1%E5%BD%A2%E5%9B%BE" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>条形图以垂直柱形表示价格波动范围，柱形顶部与底部分别对应最高价与最低价，柱体左右横线标记开盘价与收盘价。这种形式介于蜡烛图与线图之间，既能展示价格区间（如 AAPL 每日波动幅度），又比蜡烛图更简洁。条形图的优势在于多资产对比场景 —— 同一图表中并列绘制标普 500 与纳斯达克指数的条形图，可直观比较不同市场的波动差异；此外，通过调整柱形颜色与宽度（如col=“blue”参数），能进一步优化视觉可读性。但需注意，条形图的开盘价与收盘价标记不如蜡烛图直观，且缺乏形态识别功能，在高频数据下可能因柱形密集导致信息过载，更适合中短期数据的概览性展示。</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="graphs.html#cb323-1" tabindex="-1"></a><span class="fu">require</span>(quantmod)</span>
<span id="cb323-2"><a href="graphs.html#cb323-2" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;AAPL&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;AAPL&quot;</code></pre>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="graphs.html#cb325-1" tabindex="-1"></a><span class="fu">barChart</span>(AAPL, <span class="at">subset =</span> <span class="st">&quot;last 3 months&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:bar"></span>
<img src="QuantmodHandbook_files/figure-html/bar-1.png" alt="条形图" width="90%" />
<p class="caption">
图 3.1: 条形图
</p>
</div>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="graphs.html#cb326-1" tabindex="-1"></a><span class="fu">barChart</span>(AAPL,<span class="at">theme=</span><span class="st">&quot;white&quot;</span>,<span class="at">subset =</span> <span class="st">&quot;last 3 months&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:barWhite"></span>
<img src="QuantmodHandbook_files/figure-html/barWhite-1.png" alt="白色主题条形图" width="90%" />
<p class="caption">
图 3.2: 白色主题条形图
</p>
</div>
</div>
<div id="蜡烛图" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> 蜡烛图<a href="#%E8%9C%A1%E7%83%9B%E5%9B%BE" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>蜡烛图通过整合开盘价、收盘价、最高价与最低价，以实体与影线的组合直观呈现每个交易周期的价格波动。当收盘价高于开盘价时，实体以阳线（常为绿色）显示，反之为阴线（常为红色），影线则标记价格波动的上下限。这种可视化方式能精准传递多空力量对比 —— 例如长上影线表明价格冲高后遇阻回落，短实体配合长下影线则可能预示底部支撑强劲。在实战中，蜡烛图尤其适合短线交易策略，因其能清晰展现吞没形态、晨星组合等经典反转信号，帮助交易者捕捉趋势拐点。但需注意，蜡烛图的信息密度较高，高频数据场景下可能因形态过多导致视觉混乱，且无法直接展示成交量等辅助指标，需配合副图叠加使用。</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="graphs.html#cb327-1" tabindex="-1"></a><span class="fu">candleChart</span>(AAPL, <span class="at">subset =</span><span class="st">&quot;last 3 months&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:candle"></span>
<img src="QuantmodHandbook_files/figure-html/candle-1.png" alt="蜡烛图" width="90%" />
<p class="caption">
图 3.3: 蜡烛图
</p>
</div>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="graphs.html#cb328-1" tabindex="-1"></a><span class="fu">candleChart</span>(AAPL,<span class="at">multi.col=</span>T,<span class="at">theme=</span><span class="st">&quot;white&quot;</span>, <span class="at">subset =</span> <span class="st">&quot;last 3 months&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:cadleWhite"></span>
<img src="QuantmodHandbook_files/figure-html/cadleWhite-1.png" alt="白色主题蜡烛图" width="90%" />
<p class="caption">
图 3.4: 白色主题蜡烛图
</p>
</div>
</div>
<div id="线图" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> 线图<a href="#%E7%BA%BF%E5%9B%BE" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>蜡烛图通过整合开盘价、收盘价、最高价与最低价，以实体与影线的组合直观呈现每个交易周期的价格波动。当收盘价高于开盘价时，实体以阳线（常为绿色）显示，反之为阴线（常为红色），影线则标记价格波动的上下限。这种可视化方式能精准传递多空力量对比 —— 例如长上影线表明价格冲高后遇阻回落，短实体配合长下影线则可能预示底部支撑强劲。在实战中，蜡烛图尤其适合短线交易策略，因其能清晰展现吞没形态、晨星组合等经典反转信号，帮助交易者捕捉趋势拐点。但需注意，蜡烛图的信息密度较高，高频数据场景下可能因形态过多导致视觉混乱，且无法直接展示成交量等辅助指标，需配合副图叠加使用。</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="graphs.html#cb329-1" tabindex="-1"></a><span class="fu">lineChart</span>(AAPL, <span class="at">subset =</span> <span class="st">&quot;last 3 months&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:line"></span>
<img src="QuantmodHandbook_files/figure-html/line-1.png" alt="线图" width="90%" />
<p class="caption">
图 3.5: 线图
</p>
</div>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="graphs.html#cb330-1" tabindex="-1"></a><span class="fu">lineChart</span>(AAPL,<span class="at">theme=</span><span class="st">&quot;white&quot;</span>, <span class="at">subset =</span> <span class="st">&quot;last 3 months&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:lineWhite"></span>
<img src="QuantmodHandbook_files/figure-html/lineWhite-1.png" alt="白色主题线图" width="90%" />
<p class="caption">
图 3.6: 白色主题线图
</p>
</div>
<p>三种图形的适用场景呈现明显差异化：</p>
<p>蜡烛图适合短线交易中的形态识别，需搭配 RSI 等震荡指标增强信号可靠性；线图更适合长期投资决策，通过与长期均线的配合判断趋势持续性；条形图则在跨市场对比或数据概览中更具优势，可结合成交量副图完善分析维度。例如分析新能源板块时，可先用线图确认行业指数的三年趋势，再通过蜡烛图在关键阻力位寻找入场信号，最后用条形图对比板块内龙头股的波动幅度，形成从宏观到微观的完整分析链路。</p>
</div>
</div>
<div id="图形主题定制" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> 图形主题定制<a href="#%E5%9B%BE%E5%BD%A2%E4%B8%BB%E9%A2%98%E5%AE%9A%E5%88%B6" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>在 R 语言的金融图表绘制中，chartTheme 函数是一个非常重要的工具，主要用于自定义图表的颜色主题。它可以让你根据个人喜好或特定需求，调整图表的各种视觉元素，使图表更加美观和个性化。从背景色 bg.col、网格线颜色 grid.col，到蜡烛图涨跌颜色 up.col、dn.col，均可按需定制，打造符合需求的视觉效果。</p>
<p>chartTheme 函数中的参数众多，主要分为以下几类：</p>
<ul>
<li>基础颜色设置：
<ul>
<li>fg.col: 前景色，主要用于文本和坐标轴</li>
<li>bg.col: 背景色</li>
<li>grid.col: 网格线颜色</li>
<li>border: 边框颜色</li>
</ul></li>
<li>刻度线颜色设置：
<ul>
<li>minor.tick: 次要刻度线颜色</li>
<li>major.tick: 主要刻度线颜色</li>
</ul></li>
<li>K 线图颜色设置：
<ul>
<li>up.col: 上涨柱 / 蜡烛的填充色</li>
<li>dn.col: 下跌柱 / 蜡烛的填充色</li>
<li>up.border: 上涨柱 / 蜡烛的边框颜色</li>
<li>dn.border: 下跌柱 / 蜡烛的边框颜色</li>
</ul></li>
<li>状态转换颜色设置：
<ul>
<li>up.up.col: 连续上涨时柱 / 蜡烛的颜色</li>
<li>up.dn.col: 上涨后下跌时柱 / 蜡烛的颜色</li>
<li>dn.dn.col: 连续下跌时柱 / 蜡烛的颜色</li>
<li>dn.up.col: 下跌后上涨时柱 / 蜡烛的颜色</li>
</ul></li>
<li>状态转换边框颜色
<ul>
<li>up.up.border: 连续上涨时柱 / 蜡烛的边框颜色</li>
<li>up.dn.border: 上涨后下跌时柱 / 蜡烛的边框颜色</li>
<li>dn.dn.border: 连续下跌时柱 / 蜡烛的边框颜色</li>
<li>dn.up.border: 下跌后上涨时柱 / 蜡烛的颜色</li>
</ul></li>
</ul>
<p>下面通过一个完整的案例，展示如何使用chartTheme()函数来自定义图表主题：</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="graphs.html#cb331-1" tabindex="-1"></a><span class="co"># 加载必要的包</span></span>
<span id="cb331-2"><a href="graphs.html#cb331-2" tabindex="-1"></a><span class="fu">library</span>(quantmod)</span>
<span id="cb331-3"><a href="graphs.html#cb331-3" tabindex="-1"></a></span>
<span id="cb331-4"><a href="graphs.html#cb331-4" tabindex="-1"></a><span class="co"># 获取股票数据</span></span>
<span id="cb331-5"><a href="graphs.html#cb331-5" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;AAPL&quot;</span>, <span class="at">from =</span> <span class="st">&quot;2024-01-01&quot;</span>, <span class="at">to =</span> <span class="st">&quot;2025-01-01&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;AAPL&quot;</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="graphs.html#cb333-1" tabindex="-1"></a><span class="co"># 创建自定义主题</span></span>
<span id="cb333-2"><a href="graphs.html#cb333-2" tabindex="-1"></a>custom_theme <span class="ot">&lt;-</span> <span class="fu">chartTheme</span>(</span>
<span id="cb333-3"><a href="graphs.html#cb333-3" tabindex="-1"></a>  <span class="co"># 基础颜色</span></span>
<span id="cb333-4"><a href="graphs.html#cb333-4" tabindex="-1"></a>  <span class="at">fg.col =</span> <span class="st">&quot;blue&quot;</span>,      <span class="co"># 前景色（文本、坐标轴）</span></span>
<span id="cb333-5"><a href="graphs.html#cb333-5" tabindex="-1"></a>  <span class="at">bg.col =</span> <span class="st">&quot;white&quot;</span>,         <span class="co"># 背景色</span></span>
<span id="cb333-6"><a href="graphs.html#cb333-6" tabindex="-1"></a>  <span class="at">grid.col =</span> <span class="st">&quot;lightgray&quot;</span>,   <span class="co"># 网格线颜色</span></span>
<span id="cb333-7"><a href="graphs.html#cb333-7" tabindex="-1"></a>  <span class="at">border =</span> <span class="st">&quot;black&quot;</span>,         <span class="co"># 边框颜色</span></span>
<span id="cb333-8"><a href="graphs.html#cb333-8" tabindex="-1"></a>  </span>
<span id="cb333-9"><a href="graphs.html#cb333-9" tabindex="-1"></a>  <span class="co"># 刻度线颜色</span></span>
<span id="cb333-10"><a href="graphs.html#cb333-10" tabindex="-1"></a>  <span class="at">minor.tick =</span> <span class="st">&quot;gray&quot;</span>,      <span class="co"># 次要刻度线</span></span>
<span id="cb333-11"><a href="graphs.html#cb333-11" tabindex="-1"></a>  <span class="at">major.tick =</span> <span class="st">&quot;lightgray&quot;</span>,  <span class="co"># 主要刻度线</span></span>
<span id="cb333-12"><a href="graphs.html#cb333-12" tabindex="-1"></a>  </span>
<span id="cb333-13"><a href="graphs.html#cb333-13" tabindex="-1"></a>  <span class="co"># K线颜色</span></span>
<span id="cb333-14"><a href="graphs.html#cb333-14" tabindex="-1"></a>  <span class="at">up.col =</span> <span class="st">&quot;green&quot;</span>,         <span class="co"># 上涨K线填充色</span></span>
<span id="cb333-15"><a href="graphs.html#cb333-15" tabindex="-1"></a>  <span class="at">dn.col =</span> <span class="st">&quot;red&quot;</span>,           <span class="co"># 下跌K线填充色</span></span>
<span id="cb333-16"><a href="graphs.html#cb333-16" tabindex="-1"></a>  <span class="at">up.border =</span> <span class="st">&quot;darkgreen&quot;</span>,  <span class="co"># 上涨K线边框色</span></span>
<span id="cb333-17"><a href="graphs.html#cb333-17" tabindex="-1"></a>  <span class="at">dn.border =</span> <span class="st">&quot;darkred&quot;</span>,    <span class="co"># 下跌K线边框色</span></span>
<span id="cb333-18"><a href="graphs.html#cb333-18" tabindex="-1"></a>  </span>
<span id="cb333-19"><a href="graphs.html#cb333-19" tabindex="-1"></a>  <span class="co"># 状态转换颜色（高级设置）</span></span>
<span id="cb333-20"><a href="graphs.html#cb333-20" tabindex="-1"></a>  <span class="at">up.up.col =</span> <span class="st">&quot;limegreen&quot;</span>,    <span class="co"># 连续上涨</span></span>
<span id="cb333-21"><a href="graphs.html#cb333-21" tabindex="-1"></a>  <span class="at">up.dn.col =</span> <span class="st">&quot;palegreen&quot;</span>,    <span class="co"># 涨后跌</span></span>
<span id="cb333-22"><a href="graphs.html#cb333-22" tabindex="-1"></a>  <span class="at">dn.dn.col =</span> <span class="st">&quot;tomato&quot;</span>,       <span class="co"># 连续下跌</span></span>
<span id="cb333-23"><a href="graphs.html#cb333-23" tabindex="-1"></a>  <span class="at">dn.up.col =</span> <span class="st">&quot;lightcoral&quot;</span>,   <span class="co"># 跌后涨</span></span>
<span id="cb333-24"><a href="graphs.html#cb333-24" tabindex="-1"></a>  <span class="at">up.up.border =</span> <span class="st">&quot;darkgreen&quot;</span>, <span class="co"># 连续上涨边框</span></span>
<span id="cb333-25"><a href="graphs.html#cb333-25" tabindex="-1"></a>  <span class="at">up.dn.border =</span> <span class="st">&quot;darkgreen&quot;</span>, <span class="co"># 涨后跌边框</span></span>
<span id="cb333-26"><a href="graphs.html#cb333-26" tabindex="-1"></a>  <span class="at">dn.dn.border =</span> <span class="st">&quot;darkred&quot;</span>,   <span class="co"># 连续下跌边框</span></span>
<span id="cb333-27"><a href="graphs.html#cb333-27" tabindex="-1"></a>  <span class="at">dn.up.border =</span> <span class="st">&quot;darkred&quot;</span>    <span class="co"># 跌后涨边框</span></span>
<span id="cb333-28"><a href="graphs.html#cb333-28" tabindex="-1"></a>)</span>
<span id="cb333-29"><a href="graphs.html#cb333-29" tabindex="-1"></a></span>
<span id="cb333-30"><a href="graphs.html#cb333-30" tabindex="-1"></a><span class="co"># 使用自定义主题绘制K线图</span></span>
<span id="cb333-31"><a href="graphs.html#cb333-31" tabindex="-1"></a><span class="fu">chartSeries</span>(AAPL, </span>
<span id="cb333-32"><a href="graphs.html#cb333-32" tabindex="-1"></a>            <span class="at">theme =</span> custom_theme, </span>
<span id="cb333-33"><a href="graphs.html#cb333-33" tabindex="-1"></a>            <span class="at">type =</span> <span class="st">&quot;candlesticks&quot;</span>, </span>
<span id="cb333-34"><a href="graphs.html#cb333-34" tabindex="-1"></a>            <span class="at">name =</span> <span class="st">&quot;AAPL Stock Price with Custom Theme&quot;</span>,</span>
<span id="cb333-35"><a href="graphs.html#cb333-35" tabindex="-1"></a>            <span class="at">subset =</span> <span class="st">&quot;last 3 months&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:customTheme"></span>
<img src="QuantmodHandbook_files/figure-html/customTheme-1.png" alt="自定义主题图表" width="90%" />
<p class="caption">
图 3.7: 自定义主题图表
</p>
</div>
<p>上述代码会生成一张苹果公司股票的 K 线图，使用了我们自定义的主题：
* 背景为白色，网格线为浅灰色，便于数据查看
* 上涨 K 线使用绿色系，下跌 K 线使用红色系，符合金融图表的传统
* 连续上涨和下跌的 K 线使用了不同深浅的颜色，增强了视觉区分度
* 文本和坐标轴使用深蓝色，既清晰又不刺眼</p>
<p>还可以创建多个主题并保存，根据不同的场景切换使用：</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="graphs.html#cb334-1" tabindex="-1"></a><span class="co"># 创建暗黑主题</span></span>
<span id="cb334-2"><a href="graphs.html#cb334-2" tabindex="-1"></a>dark_theme <span class="ot">&lt;-</span> <span class="fu">chartTheme</span>(</span>
<span id="cb334-3"><a href="graphs.html#cb334-3" tabindex="-1"></a>  <span class="at">bg.col =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb334-4"><a href="graphs.html#cb334-4" tabindex="-1"></a>  <span class="at">fg.col =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb334-5"><a href="graphs.html#cb334-5" tabindex="-1"></a>  <span class="at">grid.col =</span> <span class="st">&quot;gray30&quot;</span>,</span>
<span id="cb334-6"><a href="graphs.html#cb334-6" tabindex="-1"></a>  <span class="at">up.col =</span> <span class="st">&quot;cyan&quot;</span>,</span>
<span id="cb334-7"><a href="graphs.html#cb334-7" tabindex="-1"></a>  <span class="at">dn.col =</span> <span class="st">&quot;magenta&quot;</span></span>
<span id="cb334-8"><a href="graphs.html#cb334-8" tabindex="-1"></a>)</span>
<span id="cb334-9"><a href="graphs.html#cb334-9" tabindex="-1"></a></span>
<span id="cb334-10"><a href="graphs.html#cb334-10" tabindex="-1"></a><span class="co"># 创建简约主题</span></span>
<span id="cb334-11"><a href="graphs.html#cb334-11" tabindex="-1"></a>simple_theme <span class="ot">&lt;-</span> <span class="fu">chartTheme</span>(</span>
<span id="cb334-12"><a href="graphs.html#cb334-12" tabindex="-1"></a>  <span class="at">bg.col =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb334-13"><a href="graphs.html#cb334-13" tabindex="-1"></a>  <span class="at">fg.col =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb334-14"><a href="graphs.html#cb334-14" tabindex="-1"></a>  <span class="at">grid.col =</span> <span class="st">&quot;lightgray&quot;</span>,</span>
<span id="cb334-15"><a href="graphs.html#cb334-15" tabindex="-1"></a>  <span class="at">up.col =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb334-16"><a href="graphs.html#cb334-16" tabindex="-1"></a>  <span class="at">dn.col =</span> <span class="st">&quot;black&quot;</span></span>
<span id="cb334-17"><a href="graphs.html#cb334-17" tabindex="-1"></a>)</span>
<span id="cb334-18"><a href="graphs.html#cb334-18" tabindex="-1"></a></span>
<span id="cb334-19"><a href="graphs.html#cb334-19" tabindex="-1"></a><span class="co"># 根据需要切换主题</span></span>
<span id="cb334-20"><a href="graphs.html#cb334-20" tabindex="-1"></a><span class="fu">chartSeries</span>(AAPL, <span class="at">theme =</span> dark_theme)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:createtheme"></span>
<img src="QuantmodHandbook_files/figure-html/createtheme-1.png" alt="暗黑主题" width="90%" />
<p class="caption">
图 3.8: 暗黑主题
</p>
</div>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="graphs.html#cb335-1" tabindex="-1"></a><span class="fu">chartSeries</span>(AAPL, <span class="at">theme =</span> simple_theme)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:simpleTheme"></span>
<img src="QuantmodHandbook_files/figure-html/simpleTheme-1.png" alt="基本主题" width="90%" />
<p class="caption">
图 3.9: 基本主题
</p>
</div>
<p>通过灵活使用 chartTheme 函数，你可以让金融图表更加专业、美观，突出显示重要信息，提升数据可视化的效果。</p>
</div>
<div id="图形缩放" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> 图形缩放<a href="#%E5%9B%BE%E5%BD%A2%E7%BC%A9%E6%94%BE" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>当我们查看金融数据的图形时，有时候会希望查看其中某个时段对应的图形。zoom(n=1, eps=2) 和 zoomChart(subset, yrange=NULL) 函数支持对图表区域进行放大或缩小，方便聚焦关键数据区间。我们还可以借助 zooom 函数对 chartSeries 函数的绘图结果进行缩放或者说截取图形子集。zooom 的用法很简单，在现有绘图基础上，运行 zooom 函数，然后，根据提示分别点击结果区间对应的左边界和右边界即可。</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="graphs.html#cb336-1" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;AAPL&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;AAPL&quot;</code></pre>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="graphs.html#cb338-1" tabindex="-1"></a><span class="fu">candleChart</span>(AAPL,<span class="at">multi.col=</span><span class="cn">TRUE</span>,<span class="at">theme=</span><span class="st">&#39;white&#39;</span>) </span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:zoom"></span>
<img src="QuantmodHandbook_files/figure-html/zoom-1.png" alt="原始蜡烛图" width="90%" />
<p class="caption">
图 3.10: 原始蜡烛图
</p>
</div>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="graphs.html#cb339-1" tabindex="-1"></a><span class="fu">candleChart</span>(AAPL,<span class="at">multi.col=</span><span class="cn">TRUE</span>,<span class="at">theme=</span><span class="st">&#39;white&#39;</span>) </span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:zoomYear-1"></span>
<img src="QuantmodHandbook_files/figure-html/zoomYear-1.png" alt="2013年以来" width="90%" />
<p class="caption">
图 3.11: 2013年以来
</p>
</div>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="graphs.html#cb340-1" tabindex="-1"></a><span class="fu">zoomChart</span>(<span class="st">&quot;2013::&quot;</span>, <span class="at">yrange=</span><span class="cn">NULL</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:zoomYear-2"></span>
<img src="QuantmodHandbook_files/figure-html/zoomYear-2.png" alt="2013年以来" width="90%" />
<p class="caption">
图 3.12: 2013年以来
</p>
</div>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="graphs.html#cb341-1" tabindex="-1"></a><span class="fu">candleChart</span>(AAPL,<span class="at">multi.col=</span><span class="cn">TRUE</span>,<span class="at">theme=</span><span class="st">&#39;white&#39;</span>) </span></code></pre></div>
<p><img src="QuantmodHandbook_files/figure-html/zoomMonth-1.png" width="90%" /></p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="graphs.html#cb342-1" tabindex="-1"></a><span class="fu">zoomChart</span>(<span class="st">&quot;2014-06::&quot;</span>, <span class="at">yrange=</span><span class="cn">NULL</span>)</span></code></pre></div>
<p><img src="QuantmodHandbook_files/figure-html/zoomMonth-2.png" width="90%" /></p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="graphs.html#cb343-1" tabindex="-1"></a><span class="fu">require</span>(quantmod) <span class="co"># 载入quantmod包</span></span>
<span id="cb343-2"><a href="graphs.html#cb343-2" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;AAPL&quot;</span>)  <span class="co"># 获取高盛公司的股票行情数据</span></span>
<span id="cb343-3"><a href="graphs.html#cb343-3" tabindex="-1"></a><span class="fu">chartSeries</span>(AAPL,<span class="at">theme=</span><span class="st">&quot;white&quot;</span>)  <span class="co"># 绘制股票行情数据图，结果如图3.4.1</span></span>
<span id="cb343-4"><a href="graphs.html#cb343-4" tabindex="-1"></a><span class="co"># 对图形进行缩放</span></span>
<span id="cb343-5"><a href="graphs.html#cb343-5" tabindex="-1"></a><span class="fu">zooom</span>(<span class="at">n=</span><span class="dv">1</span>, <span class="at">eps=</span><span class="dv">2</span>)    </span></code></pre></div>
</div>
<div id="图形存储" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> 图形存储<a href="#%E5%9B%BE%E5%BD%A2%E5%AD%98%E5%82%A8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>完成图表绘制与调整后，saveChart()函数可将图表保存为多种格式。以 AAPL 股票数据为例，在绘制基本图表并添加布林线指标后，使用saveChart(‘pdf’)即可将图表保存为 PDF 格式，还可通过width参数自定义文件宽度，便于后续报告展示与分享。</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="graphs.html#cb344-1" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">&quot;AAPL&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;AAPL&quot;</code></pre>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="graphs.html#cb346-1" tabindex="-1"></a><span class="fu">chartSeries</span>(AAPL)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:savePdf-1"></span>
<img src="QuantmodHandbook_files/figure-html/savePdf-1.png" alt="蜡烛图" width="90%" />
<p class="caption">
图 3.13: 蜡烛图
</p>
</div>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="graphs.html#cb347-1" tabindex="-1"></a><span class="fu">require</span>(TTR)</span>
<span id="cb347-2"><a href="graphs.html#cb347-2" tabindex="-1"></a><span class="fu">addBBands</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:savePdf-2"></span>
<img src="QuantmodHandbook_files/figure-html/savePdf-2.png" alt="蜡烛图" width="90%" />
<p class="caption">
图 3.14: 蜡烛图
</p>
</div>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="graphs.html#cb348-1" tabindex="-1"></a><span class="fu">saveChart</span>(<span class="st">&#39;pdf&#39;</span>)</span></code></pre></div>
<pre><code>## chart saved to AAPL.pdf</code></pre>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="graphs.html#cb350-1" tabindex="-1"></a><span class="fu">saveChart</span>(<span class="st">&#39;pdf&#39;</span>, <span class="at">width=</span><span class="dv">13</span>)</span></code></pre></div>
<pre><code>## chart saved to AAPL.pdf</code></pre>
<p>通过这些功能完备的图形分析工具，R 语言为金融数据可视化提供了一站式解决方案，无论是基础数据展示还是复杂技术指标分析，都能高效且精准地实现。</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="manipulation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="TTR.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": true,
    "facebook": false,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/dengyishuo/quantmod-handbook/03-graphs.Rmd",
    "text": "编辑"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["QuantmodHandbook.pdf", "QuantmodHandbook.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "none"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
